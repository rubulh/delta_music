/*1309295194,176820408*/

if (window.CavalryLogger) { CavalryLogger.start_js(["0\/D8u"]); }

function hasArrayNature(a){return (!!a&&(typeof a=='object'||typeof a=='function')&&('length' in a)&&!('setInterval' in a)&&(Object.prototype.toString.call(a)==="[object Array]"||('callee' in a)||('item' in a)));}function $A(b){if(!hasArrayNature(b))return [b];if(b.item){var a=b.length,c=new Array(a);while(a--)c[a]=b[a];return c;}return Array.prototype.slice.call(b);}
function eval_global(c){if('string'!=typeof(c)){throw new Error('JS sent to eval_global is not a string.  Only strings '+'are permitted.');}else if(''==c)return;var d=document.createElement('script');d.type='text/javascript';try{d.appendChild(document.createTextNode(c));}catch(a){d.text=c;}var b=(document.getElementsByTagName("head")[0]||document.documentElement);b.appendChild(d);b.removeChild(d);}
function copy_properties(b,c){b=b||{};c=c||{};for(var a in c)b[a]=c[a];if(c.hasOwnProperty&&c.hasOwnProperty('toString')&&(typeof c.toString!='undefined')&&(b.toString!==c.toString))b.toString=c.toString;return b;}function add_properties(a,b){return copy_properties(window[a]||(window[a]={}),b);}function is_empty(b){if(b instanceof Array){return b.length==0;}else if(b instanceof Object){for(var a in b)return false;return true;}else return !b;}
if(!window.async_callback)window.async_callback=function(a,b){return a;};function Arbiter(){copy_properties(this,{_listeners:[],_events:{},_callbacks:{},_last_id:1,_listen:{},_index:{}});copy_properties(this,Arbiter);}copy_properties(Arbiter,{SUBSCRIBE_NEW:'new',SUBSCRIBE_ALL:'all',BEHAVIOR_EVENT:'event',BEHAVIOR_PERSISTENT:'persistent',BEHAVIOR_STATE:'state',LIVEMESSAGE:'livemessage',BOOTLOAD:'bootload',FUNCTION_EXTENSION:'function_ext',CONTEXT_CHANGE:'ui/context-change',PAGECACHE_INVALIDATE:'pagecache/invalidate',NEW_NOTIFICATIONS:'chat/new_notifications',LIST_EDITOR_LISTS_CHANGED:'listeditor/friend_lists_changed',subscribe:function(k,b,i){if(!k||k.length==0)return null;k=$A(k);var a=Arbiter._getInstance(this);a._listeners.push({callback:b,types:k});var h=a._listeners.length-1;for(var d=0;d<k.length;d++)if(a._index[k[d]]){a._index[k[d]].push(h);}else a._index[k[d]]=[h];i=i||Arbiter.SUBSCRIBE_ALL;if(i==Arbiter.SUBSCRIBE_ALL){var c,j,g;for(var e=0;e<k.length;e++){j=k[e];if(j in a._events)for(var f=0;f<a._events[j].length;f++){c=a._events[j][f];g=b.apply(null,[j,c]);if(g===false){a._events[j].splice(f,1);f--;}}}}return {subscriberID:h};},unsubscribe:function(e){var a=Arbiter._getInstance(this);var c=a._listeners[e.subscriberID];for(var d=0;d<c.types.length;d++){var f=c.types[d];if(a._index[f])for(var b=0;b<a._index[f].length;b++)if(a._index[f][b]==e.subscriberID){a._index[f].splice(b,1);if(a._index[f].length==0)delete a._index[f];break;}}delete a._listeners[e.subscriberID];},inform:function(i,c,b){var l=hasArrayNature(i);var k=$A(i);var a=Arbiter._getInstance(this);var h={};b=b||Arbiter.BEHAVIOR_EVENT;for(var e=0;e<k.length;e++){var i=k[e],d=null;if(b==Arbiter.BEHAVIOR_PERSISTENT){d=a._events.length;if(!(i in a._events))a._events[i]=[];a._events[i].push(c);a._events[i]._stateful=false;}else if(b==Arbiter.BEHAVIOR_STATE){d=0;a._events[i]=[c];a._events[i]._stateful=true;}else if(i in a._events)a._events[i]._stateful=false;window.ArbiterMonitor&&ArbiterMonitor.log('event',i,c,a);var g;if(a._index[i]){var j=$A(a._index[i]);for(var f=0;f<j.length;f++){g=a._listeners[j[f]].callback.apply(null,[i,c]);if(g===false){if(d!==null)a._events[i].splice(d,1);break;}}}a._updateCallbacks(i,c);window.ArbiterMonitor&&ArbiterMonitor.log('done',i,c,a);h[i]=g;}return l?h:h[k[0]];},query:function(b){var a=Arbiter._getInstance(this);if(!(b in a._events))return null;if(a._events[b].length)return a._events[b][0];return null;},_instance:null,_getInstance:function(a){if(a instanceof Arbiter)return a;if(!Arbiter._instance)Arbiter._instance=new Arbiter();return Arbiter._instance;},registerCallback:function(b,d){var h,c=0,a=Arbiter._getInstance(this),g=false;if(typeof b=='function'){h=a._last_id;a._last_id++;g=true;}else{if(!a._callbacks[b])return null;h=b;}if(hasArrayNature(d)){var i={};for(var f=0;f<d.length;f++)i[d[f]]=1;d=i;}for(var j in d){try{if(a.query(j))continue;}catch(e){}c+=d[j];if(a._listen[j]===undefined)a._listen[j]={};a._listen[j][h]=(a._listen[j][h]||0)+d[j];}if(c==0&&g){b();return null;}if(!g){a._callbacks[h].depnum+=c;}else a._callbacks[h]={callback:async_callback(b,'arbiter'),depnum:c};return h;},_updateCallbacks:function(d,c){if(c===null||!this._listen[d])return;for(var b in this._listen[d]){this._listen[d][b]--;if(this._listen[d][b]<=0)delete this._listen[d][b];this._callbacks[b].depnum--;if(this._callbacks[b].depnum<=0){var a=this._callbacks[b].callback;delete this._callbacks[b];a();}}}});
Function.prototype.deferUntil=function(a,h,b,i){var f=a();if(f){this(f);return;}var e=this,d=null,g=(+new Date());var c=function(){f=a();if(!f)if(h&&(new Date()-g)>=h){i&&i();}else return;d&&clearInterval(d);e(f);};d=setInterval(c,20,b);return d;};var Bootloader=window.Bootloader=(window.Bootloader&&window.Bootloader.realBootloader)?window.Bootloader:(function(a){return {realBootloader:true,configurePage:function(b){var h={};var g=this.resolveResources(b);for(var c=0;c<g.length;c++){h[g[c].src]=g[c];this.requested(g[c].name);this._startCSSPoll(g[c].name);}var e=document.getElementsByTagName('link');for(var c=0;c<e.length;++c){if(e[c].rel!='stylesheet')continue;for(var d in h)if(e[c].href.indexOf(d)!==-1){var f=h[d].name;this._cssLinkMap[f]={link:e[c]};if(h[d].permanent)this._permanent[f]=true;delete h[d];break;}}},loadComponents:function(d,b){d=$A(d);var g=[];for(var e=0;e<d.length;++e){if(!d[e])continue;var c=this._componentMap[d[e]];if(!!c)for(var f=0;f<c.length;++f)g.push(c[f]);}return this.loadResources(g,b);},loadResources:function(h,b,g,k){h=Bootloader.resolveResources($A(h));if(g){var e={};for(var c=0;c<h.length;++c)e[h[c].name]=true;for(var d in this._requested)if(!(d in this._permanent)&&!(d in e)&&!(d in this._earlyResources))this._unloadResource(d);this._earlyResources={};}var l=[];var f=[];for(var c=0;c<h.length;++c){var i=h[c];if(i.permanent)this._permanent[i.name]=true;var j=Arbiter.BOOTLOAD+'/'+i.name;if(Arbiter.query(j)!==null)continue;if(!i.nonblocking)f.push(j);if(!this._requested[i.name]){this.requested(i.name);l.push(i);window.CavalryLogger&&CavalryLogger.getInstance().measureResources(i,k);}}if(b)b=Arbiter.registerCallback(b,f);for(var c=0;c<l.length;++c)this.requestResource(l[c].type,l[c].src,l[c].name);return b;},requestResource:function(k,h,f){var c=this.getHardpoint();if(k=='js'){var g=document.createElement('script');g.src=h;g.type='text/javascript';g.async=true;var b=function(){Bootloader.done([f]);};g.onload=g.onerror=b;g.onreadystatechange=function(){if(this.readyState in {loaded:1,complete:1})b();};c.appendChild(g);}else if(k=='css'){if(document.createStyleSheet){var i=this._styleTags,j=-1;for(var d=0;d<i.length;d++)if(i[d].imports.length<25){j=d;break;}if(j==-1){i.push(document.createStyleSheet());j=i.length-1;}i[j].addImport(h);this._cssLinkMap[f]={tagIdx:j,href:h};}else{var e=document.createElement('link');e.rel="stylesheet";e.type="text/css";e.media="all";e.href=h;this._cssLinkMap[f]={link:e};c.appendChild(e);}this._startCSSPoll(f);}},_activeCSSPolls:{},_expireTime:null,_runCSSPolls:function(){var g=(+new Date());if(g>=this._expireTime){if(window.send_error_signal)if(Math.random()<.01)send_error_signal('js_timeout_and_exception','00001:error:CSS timeout.');var d=[];for(var f in this._activeCSSPolls)d.push(f);Bootloader.done(d,true);this._activeCSSPolls={};}else{var e=Bootloader._CSS_EXPECTED_HEIGHT;var b;var d=[];for(var f in this._activeCSSPolls){var c=this._activeCSSPolls[f];var h=c.offsetHeight==e||c.currentStyle&&c.currentStyle.height==e+'px'||window.getComputedStyle&&(b=document.defaultView.getComputedStyle(c,null))&&b.getPropertyValue('height')==e+'px';if(h){d.push(f);c.parentNode.removeChild(c);delete this._activeCSSPolls[f];}}if(!is_empty(d)){Bootloader.done(d,true);this._expireTime=g+Bootloader._CSS_POLL_EXPIRATION;}}return is_empty(this._activeCSSPolls);},_startCSSPoll:function(d){var c='bootloader_'+d.replace(/[^a-z0-9]/ig,'_');var b=bagofholding;bind(this,function(){var e=document.createElement('div');e.id=c;document.body.appendChild(e);this._expireTime=(+new Date())+Bootloader._CSS_POLL_EXPIRATION;var g=is_empty(this._activeCSSPolls);this._activeCSSPolls[d]=e;if(g)var f=setInterval(bind(this,function(){if(this._runCSSPolls())f&&clearInterval(f);}),20,false);}).deferUntil(function(){return document.body;},5000,false,b.curry("Still no DOM"));},done:function(f,c){var g=(a&&a._preloaded)||[];(a||{})._preloaded=[];f=f.concat(g);this.requested(f);if(!c){var e={sender:this};Arbiter.inform(Arbiter.BOOTLOAD,e,Arbiter.BEHAVIOR_EVENT);}for(var b=0;b<f.length;++b){var d=f[b];Arbiter.inform(Arbiter.BOOTLOAD+'/'+d,true,Arbiter.BEHAVIOR_STATE);}},requested:function(c){c=$A(c);for(var b=0;b<c.length;++b)this._requested[c[b]]=true;},enableBootload:function(b){for(var c in b)if(!this._componentMap[c])this._componentMap[c]=b[c];},_unloadResource:function(e){if(e in this._cssLinkMap){var c=this._cssLinkMap[e],d=c.link;if(d){d.parentNode.removeChild(d);}else{var f=this._styleTags[c.tagIdx];for(var b=0;b<f.imports.length;b++)if(f.imports[b].href==c.href){f.removeImport(b);break;}}delete this._cssLinkMap[e];delete this._requested[e];Arbiter.inform(Arbiter.BOOTLOAD+'/'+e,null,Arbiter.BEHAVIOR_STATE);}},getHardpoint:function(){if(!this._hardpoint){var c,b=document.getElementsByTagName('head');if(b.length){c=b[0];}else c=document.body;this._hardpoint=c;}return this._hardpoint;},setResourceMap:function(c){if(!c)return;for(var b in c){if(!c[b].name)c[b].name=b;this._resources[b]=c[b];}},resolveResources:function(e,b){if(!e)return;var d=new Array(e.length);for(var c=0;c<e.length;++c)if(!e[c].type&&e[c] in this._resources){d[c]=this._resources[e[c]];if(b&&(b in d[c]))d[c]=d[c][b];}else d[c]=e[c];return d;},loadEarlyResources:function(d){this.setResourceMap(d);var c=[];for(var b in d)c.push(this._resources[b]);this.loadResources(c);for(var b in d){var e=this._resources[b];if(!e.permanent)this._earlyResources[e.name]=e;}},_requested:{},_permanent:{},_componentMap:{},_cssLinkMap:{},_styleTags:[],_hardpoint:null,_resources:{},_earlyResources:{},_CSS_POLL_EXPIRATION:5000,_CSS_EXPECTED_HEIGHT:42};})(window.Bootloader);
(function(){if(window!=window.top)return;var j='_e_',k=(window.name||'').toString();k=(k.length==7&&j==k.substr(0,3))?k.substr(3):(window.name=j+window._EagleEyeSeed).substr(3);var h=j+k+'_',f=new Date(+new Date()+604800000).toGMTString(),d=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1'),e='; expires='+f+';path=/; domain='+d,c=0,g=false,l=false,i=[];function b(m){return h+(c++)+'='+encodeURIComponent(m)+e;}function a(o){var p=document.cookie.search(j)>=0;while(i.length>0){var q=b(i[0]);if(p&&((document.cookie.length+q.length)>3500||document.cookie.split(';').length>19))break;document.cookie=q;p=true;i.shift();}if(!!o||!g&&p&&((document.cookie.length>2500||document.cookie.split(';').length>15))&&(l||(window.Arbiter&&window.OnloadEvent&&Arbiter.query(OnloadEvent.ONLOAD)))){var n=new Image();g=true;n.onload=function(){g=false;a();};var m=window._EagleEyeDomain||(window.Env&&Env.tracking_domain)||'';n.src=m+'/ajax/nectar.php?asyncSignal='+(Math.floor(Math.random()*10000)+1)+'&'+(!o?'':'s=')+(+new Date());}}window.EagleEye={log:function(o,m,n){if(window.Env&&Env.no_cookies)return;var p=[k,+new Date(),o].concat(m);p.push(p.length);Bootloader.loadComponents('json',function(){var q=JSON.stringify(p);if(!n){i.push(q);}else document.cookie=b(q);a(n);});},createLogger:function(o,m){m=m==undefined?100:m;var n=function(p,q){if(n.enabled)EagleEye.log(o,p,q);};n.enabled=false;Bootloader.loadComponents('string-extensions',function(){n._key=((window.Env&&Env.user)||Math.random())+o;n.enabled=(n._key.hash32()%65535/65535)<=m;});return n;},loaded:function(){l=true;}};})();
function set_ue_cookie(a){if(!(window.Env&&Env.no_cookies))document.cookie="act="+encodeURIComponent(a)+"; path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}var user_action=(function(){var l=(!window.ArbiterMonitor)?'r':'a',n=0,m,e,f,o=0,k,i,b,c,h=[0,0,0,0],d=function(){if(!!i){var q={profile_minifeed:1,info_tab:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,navSearch:1};for(var p=i;p&&p!=document.body;p=p.parentNode){if(!p.id||typeof p.id!=='string')continue;if(p.id.substr(0,8)=='pagelet_')return p.id.substr(8);if(p.id.substr(0,8)=='box_app_')return p.id;if(q[p.id])return p.id;}}return '-';},g=function(q){if(!ge('content'))return [0,0,0,0];var p=$('content');var r=window.Vector2?Vector2.getEventPosition(q):{x:0,y:0};return [r.x,r.y,p.offsetLeft,p.clientWidth];},j=function(){n++;var q=o+'/'+n;set_ue_cookie(q);var p={};if(window.collect_data_attribs){p=collect_data_attribs(i,['ft','gt']);copy_properties(p.ft,c.ft||{});copy_properties(p.gt,c.gt||{});}if(l=='a'){ArbiterMonitor.initUE(q);f=ArbiterMonitor.getInternRef(i);}window.EagleEye&&EagleEye.log('act',[o,n,e||'-',b,m||'-',f||d(i),l,window.URI?URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,p].concat(h));k=true;},a=function(t,p,r,s,q){if(!!r){m=r.type;if(m=='click'&&ge('content'))h=g(r);var s=0;r.ctrlKey&&(s+=1);r.shiftKey&&(s+=2);r.altKey&&(s+=4);r.metaKey&&(s+=8);if(s)m+=s;}if(!t&&r)t=r.getTarget();if(!!t){e=(t.getAttribute&&(t.getAttribute('ajaxify')||t.getAttribute('data-endpoint'))||t.action||t.href||t.name);i=t;}if(!!p&&!b)b=p;if(!!q)c=q;if(s=='FORCE'||e)j();};return function(t,p,r,s,q){var u=(+new Date());Bootloader.loadComponents('dom-collect',function(){if(u-o<10){!k&&a(t,p,r,s,q);return;}if(s=='INDIRECT')return;m=e=f=i=b=null;c={};k=false;o=u;a(t,p,r,s,q);});};})();
ge=$=function(a){return typeof a=='string'?document.getElementById(a):a;};
CSS=window.CSS||{hasClass:function(b,a){b=$(b);return (' '+b.className+' ').indexOf(' '+a+' ')>-1;},addClass:function(b,a){b=$(b);if(a&&!CSS.hasClass(b,a))b.className=b.className+' '+a;return b;},removeClass:function(b,a){b=$(b);b.className=b.className.replace(new RegExp('(^|\\s)'+a+'(?:\\s|$)','g'),'$1');return b;},toggleClass:function(b,a){return CSS.conditionClass(b,a,!CSS.hasClass(b,a));},conditionClass:function(c,b,a){return (a?CSS.addClass:CSS.removeClass)(c,b);},show:function(a){CSS.removeClass(a,'hidden_elem');},hide:function(a){CSS.addClass(a,'hidden_elem');},conditionShow:function(b,a){CSS.conditionClass(b,'hidden_elem',!a);}};
var Parent={byTag:function(a,b){b=b.toUpperCase();while(a&&a.nodeName!=b)a=a.parentNode;return a;},byClass:function(b,a){while(b&&!CSS.hasClass(b,a))b=b.parentNode;return b;},byAttribute:function(b,a){while(b&&(!b.getAttribute||!b.getAttribute(a)))b=b.parentNode;return b;}};
function trackReferrer(a,e){a=Parent.byAttribute(a,'data-referrer');if(a){var d=/^(?:(?:[^:\/?#]+):)?(?:\/\/(?:[^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/.exec(e)[1]||'';if(!d)return;var c=d+'|'+a.getAttribute('data-referrer');var b=new Date();b.setTime(new Date().getTime()+1000);document.cookie="x-src="+encodeURIComponent(c)+"; "+"expires="+b.toGMTString()+";path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}return a;}
!function(){if(window.__primer)return;window.__primer=true;var a=null;document.documentElement.onclick=function(d){d=d||window.event;a=d.target||d.srcElement;var e=Parent.byTag(a,'A');if(!e)return;var b=e.getAttribute('ajaxify');var f=e.href;var i=b||f;i&&user_action(e,'a',d);if(b&&f&&!(/#$/).test(f)){var g=d.which&&d.which!=1;var h=d.altKey||d.ctrlKey||d.metaKey||d.shiftKey;if(g||h)return;}trackReferrer(e,i);var c=['dialog'];switch(e.rel){case 'dialog-pipe':c.push('ajaxpipe');case 'dialog':case 'dialog-post':Bootloader.loadComponents(c,function(){Dialog.bootstrap(i,null,e.rel=='dialog',null,null,e);});break;case 'async':case 'async-post':Bootloader.loadComponents('async',function(){AsyncRequest.bootstrap(i,e);});break;case 'theater':Bootloader.loadComponents('PhotoTheater',function(){PhotoTheater.bootstrap(i,e);});break;case 'cstage':Bootloader.loadComponents('PhotoSnowbox',function(){PhotoSnowbox.bootstrap(i,e);});break;case 'toggle':CSS.toggleClass(e.parentNode,'openToggler');Bootloader.loadComponents('Toggler',function(){Toggler.bootstrap(e);});break;default:return;}return false;};document.documentElement.onsubmit=function(b){b=b||window.event;var c=b.target||b.srcElement;if(c&&c.nodeName=='FORM'&&c.getAttribute('rel')=='async'){user_action(c,'f',b);var d=a;Bootloader.loadComponents('dom-form',function(){Form.bootstrap(c,d);});return false;}};}();
var ua={ie:function(){return ua._populate()||this._ie;},ie64:function(){return ua.ie()&&this._win64;},firefox:function(){return ua._populate()||this._firefox;},opera:function(){return ua._populate()||this._opera;},safari:function(){return ua._populate()||this._safari;},chrome:function(){return ua._populate()||this._chrome;},windows:function(){return ua._populate()||this._windows;},osx:function(){return ua._populate()||this._osx;},linux:function(){return ua._populate()||this._linux;},iphone:function(){return ua._populate()||this._iphone;},_populated:false,_populate:function(){if(ua._populated)return;ua._populated=true;var d=navigator.userAgent;var a=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(d);var c=/(Mac OS X)|(Windows)|(Linux)/.exec(d);var b=/\b(iPhone|iP[ao]d)/.exec(d);ua._win64=!!(/Win64/.exec(d));if(a){ua._ie=a[1]?parseFloat(a[1]):NaN;if(ua._ie>=8&&!window.HTMLCollection)ua._ie=7;ua._firefox=a[2]?parseFloat(a[2]):NaN;ua._opera=a[3]?parseFloat(a[3]):NaN;ua._safari=a[4]?parseFloat(a[4]):NaN;if(ua._safari){a=/(?:Chrome\/(\d+\.\d+))/.exec(d);ua._chrome=a&&a[1]?parseFloat(a[1]):NaN;}else ua._chrome=NaN;}else ua._ie=ua._firefox=ua._opera=ua._chrome=ua._safari=NaN;if(c){if(c[1]){var e=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(d);ua._osx=e?parseFloat(e[1].replace('_','.')):true;}else ua._osx=false;ua._windows=!!c[2];ua._linux=!!c[3];}else ua._osx=ua._windows=ua._linux=false;ua._iphone=b;}};
void(1);if(!window.skipDomainLower&&navigator&&navigator.userAgent&&document.domain.toLowerCase().match(/(^|\.)facebook\..*/)&&!(parseInt((/Gecko\/([0-9]+)/.exec(navigator.userAgent)||[]).pop(),10)<=20060508))document.domain=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');window.onloadhooks=window.onloadhooks||[];window.onloadRegister=window.onloadRegister||function(a){onloadhooks.push(a);};window.onafterloadhooks=window.onafterloadhooks||[];window.onafterloadRegister=window.onafterloadRegister||function(a){onafterloadhooks.push(a);};function run_if_loaded(a,b){return window.loaded&&b.call(a);}function run_with(b,a,c){Bootloader.loadComponents(a,bind(b,c));return false;}function wait_for_load(c,b,e){e=bind(c,e,b);if(window.loaded)return e();switch((b||event).type){case 'load':case 'focus':onafterloadRegister(e);return;case 'click':var d=c.style,a=document.body.style;d.cursor=a.cursor='progress';onafterloadRegister(function(){d.cursor=a.cursor='';if(c.tagName.toLowerCase()=='a'){if(false!==e()&&c.href)window.location.href=c.href;}else if(c.click)c.click();});break;}return false;}function bind(c,b){var a=Array.prototype.slice.call(arguments,2);return function(){var e=c||(this==window?false:this),d=a.concat(Array.prototype.slice.call(arguments));if(typeof(b)=="string"){if(e[b])return e[b].apply(e,d);}else return b.apply(e,d);};}var curry=bind(null,bind,null);function env_get(a){return window.Env&&Env[a];}window.__DEV__=window.__DEV__||0;window.__rm={};document.documentElement.className=document.documentElement.className.replace('no_js','');
var Mixins={Arbiter:{_getArbiterInstance:function(){return this._arbiter||(this._arbiter=new Arbiter());},inform:function(c,b,a){return this._getArbiterInstance().inform(c,b,a);},subscribe:function(c,a,b){return this._getArbiterInstance().subscribe(c,a,b);},unsubscribe:function(a){this._getArbiterInstance().unsubscribe(a);}}};
Function.prototype.extend=function(a){if(!Metaprototype._arbiterHandle)Metaprototype._arbiterHandle=Arbiter.subscribe(Arbiter.BOOTLOAD,Metaprototype._onbootload.bind(Metaprototype));Metaprototype._queue(this,a);};function Metaprototype(){}copy_properties(Metaprototype,{makeFinal:function(a){},_pending:{},_queue:function(b,c){b.__class_extending=true;var a=Arbiter.registerCallback(bind(Metaprototype,Metaprototype._apply,b,c),[Arbiter.FUNCTION_EXTENSION+'/'+c,Arbiter.BOOTLOAD]);if(a!==null)this._pending[c]=true;},_onbootload:function(b,a){this._update();},_update:function(){for(var a in this._pending)if(!!window[a]){delete this._pending[a];if(!window[a].__class_extending){Arbiter.inform(Arbiter.FUNCTION_EXTENSION+'/'+a,true,Arbiter.BEHAVIOR_STATE);}else window[a].__class_name=a;}},_apply:function(a,c){delete a.__class_extending;var d=__metaprototype(window[c],0);var b=__metaprototype(a,d.prototype.__level+1);b.parent=d;if(!!a.__class_name)Arbiter.inform(Arbiter.FUNCTION_EXTENSION+'/'+a.__class_name,true,Arbiter.BEHAVIOR_STATE);}});function __metaprototype(c,a){if(c.__metaprototype)return c.__metaprototype;var b=new Function();b.construct=__metaprototype_construct;b.prototype.construct=__metaprototype_wrap(c,a,true);b.prototype.__level=a;b.base=c;c.prototype.parent=b;c.__metaprototype=b;return b;}function __metaprototype_construct(a){__metaprototype_init(a.parent);var c=[];var b=a;while(b.parent){c.push(new_obj=new b.parent());new_obj.__instance=a;b=b.parent;}a.parent=c[1];c.reverse();c.pop();a.__parents=c;a.__instance=a;return a.parent.construct.apply(a.parent,arguments);}function __metaprototype_init(d){if(d.initialized)return;var a=d.base.prototype;if(d.parent){__metaprototype_init(d.parent);var e=d.parent.prototype;for(var b in e)if(b!='__level'&&b!='construct'&&a[b]===undefined)a[b]=d.prototype[b]=e[b];}d.initialized=true;var c=d.prototype.__level;for(var b in a)if(b!='parent')a[b]=d.prototype[b]=__metaprototype_wrap(a[b],c);}function __metaprototype_wrap(c,b,d){if(typeof c!='function'||c.__prototyped)return c;var a=function(){var g=this.__instance;if(g){var h=g.parent;g.parent=b?g.__parents[b-1]:null;if(d){var e=[];for(var f=1;f<arguments.length;f++)e.push(arguments[f]);var i=c.apply(g,e);}else var i=c.apply(g,arguments);g.parent=h;return i;}else return c.apply(this,arguments);};a.__prototyped=true;return a;}Function.prototype.mixin=function(){var a=[this.prototype].concat(Array.prototype.slice.call(arguments));Function.mixin.apply(null,a);};Function.mixin=function(){for(var b=1,a=arguments.length;b<a;++b)copy_properties(arguments[0],Mixins[arguments[b]]||arguments[b]);};Function.prototype.bind=function(b){var a=[b,this].concat(Array.prototype.slice.call(arguments,1));return bind.apply(null,a);};Function.prototype.curry=Function.prototype.bind.bind(null,null);Function.prototype.shield=function(b){if(typeof this!='function')throw new TypeException();var a=this.bind.apply(this,$A(arguments));return function(){return a();};};Function.prototype.defer=function(b,a){if(typeof this!='function')throw new TypeError();b=b||0;return setTimeout(this,b,a);};Function.prototype.postpone=function(a){if(this._postpone){clearTimeout(this._postpone);delete this._postpone;}if(a!=null&&a>=0)this._postpone=setTimeout(this,a);};Function.prototype.recur=function(b,a){if(typeof this!='function')throw new TypeError();return setInterval(this,b,a);};function bagofholding(){}function bagof(a){return function(){return a;};}function abstractMethod(){throw new Error('You must implement this function in your base class.');}
function HTML(a){if(a&&a.__html)a=a.__html;if(this===window){if(a instanceof HTML)return a;return new HTML(a);}this._content=a;this._defer=false;this._extra_action='';this._nodes=null;this._inline_js=bagofholding;this._has_option_elements=false;return this;}HTML.isHTML=function(a){return a&&(a instanceof HTML||a.__html!==undefined);};HTML.replaceJSONWrapper=function(a){return a&&a.__html!==undefined?new HTML(a.__html):a;};copy_properties(HTML.prototype,{toString:function(){var a=this._content||'';if(this._extra_action)a+='<script type="text/javascript">'+this._extra_action+'</scr'+'ipt>';return a;},setAction:function(a){this._extra_action=a;return this;},getAction:function(){this._fillCache();var a=function(){this._inline_js();eval_global(this._extra_action);}.bind(this);if(this.getDeferred()){return a.defer.bind(a);}else return a;},setDeferred:function(a){this._defer=!!a;return this;},getDeferred:function(){return this._defer;},getContent:function(){return this._content;},getNodes:function(){this._fillCache();return this._nodes;},getRootNode:function(){return this.getNodes()[0];},hasOptionElements:function(){this._fillCache();return this._has_option_elements;},_fillCache:function(){if(null!==this._nodes)return;var d=this._content;if(!d){this._nodes=[];return;}d=d.replace(/(<(\w+)[^>]*?)\/>/g,function(l,m,n){return n.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?l:m+'></'+n+'>';});var h=d.trim().toLowerCase(),k=document.createElement('div'),b=false;var j=(!h.indexOf('<opt')&&[1,'<select multiple="multiple" class="__WRAPPER">','</select>'])||(!h.indexOf('<leg')&&[1,'<fieldset class="__WRAPPER">','</fieldset>'])||(h.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,'<table class="__WRAPPER">','</table>'])||(!h.indexOf('<tr')&&[2,'<table><tbody class="__WRAPPER">','</tbody></table>'])||((!h.indexOf('<td')||!h.indexOf('<th'))&&[3,'<table><tbody><tr class="__WRAPPER">','</tr></tbody></table>'])||(!h.indexOf('<col')&&[2,'<table><tbody></tbody><colgroup class="__WRAPPER">','</colgroup></table>'])||null;if(null===j){k.className='__WRAPPER';if(ua.ie()){j=[0,'<span style="display:none">&nbsp;</span>',''];b=true;}else j=[0,'',''];}k.innerHTML=j[1]+d+j[2];while(j[0]--)k=k.lastChild;if(b)k.removeChild(k.firstChild);k.className!='__WRAPPER';if(0!=k.getElementsByTagName('option').length)this._has_option_elements=true;if(ua.ie()){var i;if(!h.indexOf('<table')&&-1==h.indexOf('<tbody')){i=k.firstChild&&k.firstChild.childNodes;}else if(j[1]=='<table>'&&-1==h.indexOf('<tbody')){i=k.childNodes;}else i=[];for(var f=i.length-1;f>=0;--f)if(i[f].nodeName&&i[f].nodeName.toLowerCase()=='tbody'&&i[f].childNodes.length==0)i[f].parentNode.removeChild(i[f]);}var g=k.getElementsByTagName('script');var a=[];for(var e=0;e<g.length;e++)if(g[e].src){a.push(Bootloader.requestResource.bind(Bootloader,'js',g[e].src));}else a.push(eval_global.bind(null,g[e].innerHTML));for(var e=g.length-1;e>=0;e--)g[e].parentNode.removeChild(g[e]);var c=function(){for(var l=0;l<a.length;l++)a[l]();};this._nodes=$A(k.childNodes);this._inline_js=c;}});
function muffinize(d){var c='a';var b='d';var a=[c,b].join('');return d.replace(/muffin/g,a);}window.Util=window.Util||{warn:bagofholding,error:bagofholding,info:bagofholding,log:bagofholding,stack:bagofholding};if(typeof console=='undefined')console={log:bagofholding};
function object(b){var a=new Function();a.prototype=b;return new a();}function is_scalar(a){return (/string|number|boolean/).test(typeof a);}function keys(c){var b=[];for(var a in c)b.push(a);return b;}function values(b){var c=[];for(var a in b)c.push(b[a]);return c;}function count(c){var a=0;for(var b in c)a++;return a;}function are_equal(a,b){return JSON.stringify(a)==JSON.stringify(b);}function merge(){var b={};for(var a=0;a<arguments.length;a++)copy_properties(b,arguments[a]);return b;}Object.from=function(c,e){var d={};var b=hasArrayNature(e);if(typeof e=='undefined')e=true;for(var a=c.length;a--;)d[c[a]]=b?e[a]:e;return d;};function coalesce(){for(var a=0;a<arguments.length;++a)if(arguments[a]!=null)return arguments[a];return null;}
var DOM={find:function(a,c){var b=DOM.scry(a,c);return b[0];},scry:function(j,v){if(!j)return [];var w=v.split(' ');var d=[j];var i=j===document;for(var m=0;m<w.length;m++){if(d.length==0)break;if(w[m]=='')continue;var u=w[m];var s=[];var zd=false;if(u.charAt(0)=='^')if(m==0){zd=true;u=u.slice(1);}else return;u=u.replace(/\./g,' .');u=u.replace(/\#/g,' #');u=u.replace(/\[/g,' [');var z=u.split(' ');var za=z[0]||'*';var n=z[1]&&z[1].charAt(0)=='#';if(n){var h=ge(z[1].slice(1),true);if(h&&('*'==za||h.tagName.toLowerCase()==za))for(var q=0;q<d.length;q++)if(zd&&DOM.contains(h,d[q])){s=[h];break;}else if(document==d[q]||DOM.contains(d[q],h)){s=[h];break;}}else{var zc=[];var c=d.length;for(var o=0;o<c;o++){if(zd){var k=[];var g=d[o].parentNode;var a=za=='*';while(DOM.isNode(g,DOM.NODE_TYPES.ELEMENT)){if(a||g.tagName.toLowerCase()==za)k.push(g);g=g.parentNode;}}else var k=d[o].getElementsByTagName(za);var l=k.length;for(var r=0;r<l;r++)zc.push(k[r]);}for(var x=1;x<z.length;x++){var y=z[x];var p=y.charAt(0)=='.';var e=y.substring(1);for(var o=0;o<zc.length;o++){var zb=zc[o];if(!zb)continue;if(p){if(!CSS.hasClass(zb,e))delete zc[o];continue;}else{var f=y.slice(1,y.length-1);if(f.indexOf('=')==-1){if(zb.getAttribute(f)===null){delete zc[o];continue;}}else{var t=f.split('=');var b=t[0];var ze=t[1];ze=ze.slice(1,ze.length-1);if(zb.getAttribute(b)!=ze){delete zc[o];continue;}}}}}for(var o=0;o<zc.length;o++)if(zc[o]){s.push(zc[o]);if(zd)break;}}d=s;}return d;},getText:(function(){var a=document.createElement('div'),b=a.innerText==null?'textContent':'innerText';return function(c){if(!c){return '';}else if(DOM.isNode(c,DOM.NODE_TYPES.TEXT)){return c.data;}else return c[b];};})(),getSelection:function(){var b=window.getSelection,a=document.selection;if(b){return b()+'';}else if(a)return a.createRange().text;return null;},create:function(c,a,b){c=document.createElement(c);if(a){a=copy_properties({},a);if(a.style){copy_properties(c.style,a.style);delete a.style;}for(var d in a)if(d.toLowerCase().indexOf('on')==0){if(!(typeof a[d]!='function'))if(window.Event&&Event.listen){Event.listen(c,d.substr(2),a[d]);}else c[d]=a[d];delete a[d];}copy_properties(c,a);}if(b!=undefined)DOM.setContent(c,b);return c;},prependContent:function(c,b){if(!DOM.isNode(c))throw new Error('DOM.prependContent: reference element is not a node');var a=function(d){if(c.firstChild){c.insertBefore(d,c.firstChild);}else c.appendChild(d);};return DOM._addContent(b,a,c);},insertAfter:function(c,b){if(!DOM.isNode(c)||!c.parentNode)throw new Error('DOM.insertAfter: reference element is not a node');var a=function(d){if(c.nextSibling){c.parentNode.insertBefore(d,c.nextSibling);}else c.parentNode.appendChild(d);};return DOM._addContent(b,a,c.parentNode);},insertBefore:function(b,c){if(!DOM.isNode(c)||!c.parentNode)throw new Error('DOM.insertBefore: reference element is not a node or '+'does not have a parent.');var a=function(d){c.parentNode.insertBefore(d,c);};return DOM._addContent(b,a,c.parentNode);},setContent:function(b,a){if(!DOM.isNode(b))throw new Error('DOM.setContent: reference element is not a node');DOM.empty(b);return DOM.appendContent(b,a);},appendContent:function(c,b){if(!DOM.isNode(c))throw new Error('DOM.appendContent: reference element is not a node');var a=function(d){c.appendChild(d);};return DOM._addContent(b,a,c);},replace:function(c,b){if(!DOM.isNode(c)||!c.parentNode)throw new Error('DOM.replace: reference element must be a node with a'+' parent');var a=function(d){c.parentNode.replaceChild(d,c);};return DOM._addContent(b,a,c.parentNode);},remove:function(a){a=$(a);if(a.parentNode)a.parentNode.removeChild(a);},empty:function(a){a=$(a);while(a.firstChild)DOM.remove(a.firstChild);},contains:function(b,a){b=ge(b);a=ge(a);if(!b||!a){return false;}else if(b===a){return true;}else if(DOM.isNode(b,'#text')){return false;}else if(DOM.isNode(a,'#text')){return DOM.contains(b,a.parentNode);}else if(b.contains){return b.contains(a);}else if(b.compareDocumentPosition){return !!(b.compareDocumentPosition(a)&16);}else return false;},getRootElement:function(){var a=null;if(window.Quickling&&Quickling.isActive())a=ge('content');return a||document.body;},isNode:function(d,e){if(typeof(Node)=='undefined')Node=null;try{if(!d||!((Node!=undefined&&d instanceof Node)||d.nodeName))return false;}catch(a){return false;}if(typeof(e)!=='undefined'){e=$A(e).map(function(g){return (g+'').toUpperCase();});var c,f;try{c=new String(d.nodeName).toUpperCase();f=d.nodeType;}catch(a){return false;}for(var b=0;b<e.length;b++)try{if(c==e[b]||f==e[b])return true;}catch(a){}return false;}return true;},NODE_TYPES:{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION_NODE:12},_addContent:function(d,a,m){d=HTML.replaceJSONWrapper(d);if(d instanceof HTML&&-1==d.toString().indexOf('<scr'+'ipt')&&''==m.innerHTML){var g=ua.ie();if(!g||(g>7&&!DOM.isNode(m,['table','tbody','thead','tfoot','tr','select','fieldset']))){var h=g?"<div style=\"display:none;\">&nbsp;</div>":"";m.innerHTML=h+d;g&&m.removeChild(m.firstChild);return $A(m.childNodes);}}else if(DOM.isNode(m,DOM.NODE_TYPES.TEXT)){m.data=d;return [d];}var j,e=[],b=[];var f=document.createDocumentFragment();if(!(d instanceof Array))d=[d];for(var i=0;i<d.length;i++){j=HTML.replaceJSONWrapper(d[i]);if(j instanceof HTML){b.push(j.getAction());var l=j.getNodes(),c;for(var k=0;k<l.length;k++){c=(ua.safari()||(ua.ie()&&j.hasOptionElements()))?l[k]:l[k].cloneNode(true);e.push(c);f.appendChild(c);}}else if(is_scalar(j)){var n=document.createTextNode(j);e.push(n);f.appendChild(n);}else if(DOM.isNode(j)){e.push(j);f.appendChild(j);}else if(!(j instanceof Array))j!==null;}a(f);for(var i=0;i<b.length;i++)b[i]();return e;}};function $N(c,a,b){if(typeof a!='object'||DOM.isNode(a)||a instanceof Array||HTML.isHTML(a)){b=a;a=null;}return DOM.create(c,a,b);}var $$=function _$$(a){return DOM.scry.apply(null,[document].concat($A(arguments)));};
function URI(a){if(a===window)return;if(this===window)return new URI(a||window.location.href);this.parse(a||'');}copy_properties(URI,{getRequestURI:function(a,b){a=a===undefined||a;if(a&&window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getCurrentURI(!!b).getQualifiedURI();}else return new URI(window.location.href);},getMostRecentURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getMostRecentURI().getQualifiedURI();}else return new URI(window.location.href);},expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,explodeQuery:function(g){if(!g)return {};var h={};g=g.replace(/%5B/ig,'[').replace(/%5D/ig,']');g=g.split('&');for(var b=0,d=g.length;b<d;b++){var e=g[b].match(URI.arrayQueryExpression);if(!e){var j=g[b].split('=');h[URI.decodeComponent(j[0])]=j[1]===undefined?null:URI.decodeComponent(j[1]);}else{var c=e[2].split(/\]\[|\[|\]/).slice(0,-1);var f=e[1];var k=URI.decodeComponent(e[3]||'');c[0]=f;var i=h;for(var a=0;a<c.length-1;a++)if(c[a]){if(i[c[a]]===undefined)if(c[a+1]&&!c[a+1].match(/\d+$/)){i[c[a]]={};}else i[c[a]]=[];i=i[c[a]];}else{if(c[a+1]&&!c[a+1].match(/\d+$/)){i.push({});}else i.push([]);i=i[i.length-1];}if(i instanceof Array&&c[c.length-1]==''){i.push(k);}else i[c[c.length-1]]=k;}}return h;},implodeQuery:function(f,e,a){e=e||'';if(a===undefined)a=true;var g=[];if(f===null||f===undefined){g.push(a?URI.encodeComponent(e):e);}else if(f instanceof Array){for(var c=0;c<f.length;++c)try{if(f[c]!==undefined)g.push(URI.implodeQuery(f[c],e?(e+'['+c+']'):c));}catch(b){}}else if(typeof(f)=='object'){if(DOM.isNode(f)){g.push('{node}');}else for(var d in f)try{if(f[d]!==undefined)g.push(URI.implodeQuery(f[d],e?(e+'['+d+']'):d));}catch(b){}}else if(a){g.push(URI.encodeComponent(e)+'='+URI.encodeComponent(f));}else g.push(e+'='+f);return g.join('&');},encodeComponent:function(d){var c=String(d).split(/([\[\]])/);for(var a=0,b=c.length;a<b;a+=2)c[a]=window.encodeURIComponent(c[a]);return c.join('');},decodeComponent:function(a){return window.decodeURIComponent(a.replace(/\+/g,' '));}});copy_properties(URI.prototype,{parse:function(b){var a=b.toString().match(URI.expression);copy_properties(this,{protocol:a[3]||'',domain:a[4]||'',port:a[6]||'',path:a[7]||'',query_s:a[9]||'',fragment:a[11]||''});return this;},setProtocol:function(a){this.protocol=a;return this;},getProtocol:function(){return this.protocol;},setQueryData:function(a){this.query_s=URI.implodeQuery(a);return this;},addQueryData:function(a){return this.setQueryData(copy_properties(this.getQueryData(),a));},removeQueryData:function(b){if(!(b instanceof Array))b=[b];var d=this.getQueryData();for(var a=0,c=b.length;a<c;++a)delete d[b[a]];return this.setQueryData(d);},getQueryData:function(){return URI.explodeQuery(this.query_s);},setFragment:function(a){this.fragment=a;return this;},getFragment:function(){return this.fragment;},setDomain:function(a){this.domain=a;return this;},getDomain:function(){return this.domain;},setPort:function(a){this.port=a;return this;},getPort:function(){return this.port;},setPath:function(a){this.path=a;return this;},getPath:function(){return this.path.replace(/^\/+/,'/');},toString:function(){var a='';this.protocol&&(a+=this.protocol+'://');this.domain&&(a+=this.domain);this.port&&(a+=':'+this.port);if(this.domain&&!this.path)a+='/';this.path&&(a+=this.path);this.query_s&&(a+='?'+this.query_s);this.fragment&&(a+='#'+this.fragment);return a;},valueOf:function(){return this.toString();},isFacebookURI:function(){if(!URI._facebookURIRegex)URI._facebookURIRegex=new RegExp('(^|\\.)facebook\\.com([^.]*)$','i');return (!this.domain||URI._facebookURIRegex.test(this.domain));},isQuicklingEnabled:function(){return window.Quickling&&Quickling.isActive()&&Quickling.isPageActive(this);},getRegisteredDomain:function(){if(!this.domain)return '';if(!this.isFacebookURI())return null;var b=this.domain.split('.');var a=b.indexOf('facebook');return b.slice(a).join('.');},getUnqualifiedURI:function(){return new URI(this).setProtocol(null).setDomain(null).setPort(null);},getQualifiedURI:function(){var b=new URI(this);if(!b.getDomain()){var a=URI();b.setProtocol(a.getProtocol()).setDomain(a.getDomain()).setPort(a.getPort());}return b;},isSameOrigin:function(a){var b=a||window.location.href;if(!(b instanceof URI))b=new URI(b.toString());if(this.getProtocol()&&this.getProtocol()!=b.getProtocol())return false;if(this.getDomain()&&this.getDomain()!=b.getDomain())return false;return true;},go:function(a){goURI(this,a);},setSubdomain:function(b){var c=new URI(this).getQualifiedURI();var a=c.getDomain().split('.');if(a.length<=2){a.unshift(b);}else a[0]=b;return c.setDomain(a.join('.'));},getSubdomain:function(){if(!this.getDomain())return '';var a=this.getDomain().split('.');if(a.length<=2){return '';}else return a[0];},setSecure:function(a){return this.setProtocol(a?'https':'http');},isSecure:function(){return this.getProtocol()=='https';}});
var XD={_callbacks:[],_opts:{autoResize:false,allowShrink:true,channelUrl:null,hideOverflow:false,newResizeMethod:false,resizeTimeout:100,resizeWidth:false,expectResizeAck:false,resizeAckTimeout:6000},_lastResizeAckId:0,_resizeCount:0,_resizeTimestamp:0,init:function(a){this._opts=copy_properties(copy_properties({},this._opts),a);if(this._opts.autoResize)this._startResizeMonitor();Arbiter.subscribe('Connect.Unsafe.resize.ack',function(c,b){if(!b.id)b.id=this._resizeCount;if(b.id>this._lastResizeAckId)this._lastResizeAckId=b.id;}.bind(this),Arbiter.BEHAVIOUR_PERSISTANT);},send:function(b,a){a=a||this._opts.channelUrl;if(!a)return;if(a.substr(0,4)!='http')return;var h=a+'&'+URI.implodeQuery(b),d='f'+(Math.random()*(1<<30)).toString(16).replace('.',''),c=document.body.appendChild(document.createElement('div')),g=false;c.style.position='absolute';c.style.top='-10000px';c.style.width='1px';c.style.height='1px';XD._callbacks[d]=function(){if(g){(function(){c.parentNode.removeChild(c);}).defer(3000);delete XD._callbacks[d];}};if(ua.ie()){var e=('<iframe '+' src="'+h+'"'+' onload="XD._callbacks.'+d+'()"'+'></iframe>');c.innerHTML='<iframe src="javascript:false"></iframe>';g=true;(function(){c.innerHTML=e;}).defer();}else{var f=document.createElement('iframe');f.onload=XD._callbacks[d];c.appendChild(f);g=true;f.src=h;}},_computeSize:function(){var a=document.body,e=document.documentElement,h=0,f;if(this._opts.newResizeMethod){f=Math.max(Math.max(a.offsetHeight,a.scrollHeight)+a.offsetTop,Math.max(e.offsetHeight,e.scrollHeight)+e.offsetTop);}else{if(ua.ie()){f=Math.max(a.offsetHeight,a.scrollHeight)+a.offsetTop;}else f=e.offsetHeight+e.offsetTop;if(window.Dialog)f=Math.max(f,Dialog.max_bottom);}if(this._opts.resizeWidth){if(a.offsetWidth<a.scrollWidth){h=a.scrollWidth+a.offsetLeft;}else{var d=a.childNodes;for(var g=0;g<d.length;g++){var b=d[g];var c=b.offsetWidth+b.offsetLeft;if(c>h)h=c;}}if(XD.forced_min_width)h=Math.max(h,XD.forced_min_width);if(e.clientLeft>0)h+=(e.clientLeft*2);if(e.clientTop>0)f+=(e.clientTop*2);}return {width:h,height:f};},_startResizeMonitor:function(){var b,a=document.documentElement;if(this._opts.hideOverflow){a.style.overflow='hidden';document.body.style.overflow='hidden';}(function(){var f=this._computeSize();var g=new Date().getTime();var c=this._lastResizeAckId<this._resizeCount&&(g-this._resizeTimestamp)>this._opts.resizeAckTimeout;if(!b||(this._opts.expectResizeAck&&c)||(this._opts.allowShrink&&b.width!=f.width)||(!this._opts.allowShrink&&b.width<f.width)||(this._opts.allowShrink&&b.height!=f.height)||(!this._opts.allowShrink&&b.height<f.height)){b=f;this._resizeCount++;this._resizeTimestamp=g;var e={type:'resize',height:f.height,ackData:{id:this._resizeCount}};if(f.width&&f.width!=0)e.width=f.width;try{if(URI(document.referrer).isFacebookURI()&&window.parent!=window&&window.name&&window.parent.location&&URI(window.parent.location).isFacebookURI()){var iframes=window.parent.document.getElementsByTagName('iframe');for(var i=0;i<iframes.length;i=i+1)if(iframes[i].name==window.name){if(this._opts.resizeWidth)iframes[i].style.width=e.width+'px';iframes[i].style.height=e.height+'px';}}this.send(e);}catch(d){this.send(e);}}}).bind(this).recur(this._opts.resizeTimeout);}};var UnverifiedXD=copy_properties({},XD);
WindowComm={_callbacks:{},makeHandler:function(a,c){c=c||'opener';var b='f'+(Math.random()*(1<<30)).toString(16).replace('.','');WindowComm._callbacks[b]=a;return new URI('/connect/window_comm.php').setQueryData({_id:b,_relation:c}).getQualifiedURI().toString();},_recv:function(b){var a=new URI(b).getQueryData();WindowComm._callbacks[a._id](a);}};
DataStore=window.DataStore||{_storage:{},_elements:{},_tokenCounter:1,_NOT_IN_DOM_CONST:1,_getStorage:function(a){var b;if(typeof a=='string'){b='str_'+a;}else{b='elem_'+(a.__FB_TOKEN||(a.__FB_TOKEN=[DataStore._tokenCounter++]))[0];DataStore._elements[b]=a;}return DataStore._storage[b]||(DataStore._storage[b]={});},_shouldDeleteData:function(a){if(!a.nodeName)return false;try{if(null!=a.offsetParent)return false;}catch(b){}if(document.documentElement.contains){return !document.documentElement.contains(a);}else return (document.documentElement.compareDocumentPosition(a)&DataStore._NOT_IN_DOM_CONST);},set:function(c,b,d){var a=DataStore._getStorage(c);a[b]=d;return c;},get:function(e,d,c){var b=DataStore._getStorage(e),f=b[d];if(typeof f==='undefined'&&e.getAttribute){var a=e.getAttribute('data-'+d);f=(null===a)?undefined:a;}if((c!==undefined)&&(f===undefined))f=b[d]=c;return f;},remove:function(c,b){var a=DataStore._getStorage(c),d=a[b];delete a[b];return d;},cleanup:function(){var b,a;for(b in DataStore._elements){a=DataStore._elements[b];if(DataStore._shouldDeleteData(a)){delete DataStore._storage[b];delete DataStore._elements[b];}}}};
window.Event=window.Event||function(){};Event.__inlineSubmit=function(b,event){var a=Event.__getHandler&&Event.__getHandler(b,'submit');return a?null:Event.__bubbleSubmit(b,event);};Event.__bubbleSubmit=function(a,event){if(document.documentElement.attachEvent){var b;while(b!==false&&(a=a.parentNode))b=a.onsubmit?a.onsubmit(event):Event.__fire&&Event.__fire(a,'submit',event);return b;}};
Event.DATASTORE_KEY='Event.listeners';if(!Event.prototype)Event.prototype={};function $E(a){a=a||window.event||{};if(!a._inherits_from_prototype)for(var c in Event.prototype)try{a[c]=Event.prototype[c];}catch(b){}return a;}(function(){copy_properties(Event.prototype,{_inherits_from_prototype:true,stop:function(){this.cancelBubble=true;this.stopPropagation&&this.stopPropagation();return this;},prevent:function(){this.returnValue=false;this.preventDefault&&this.preventDefault();return this;},kill:function(){this.stop().prevent();return false;},getTarget:function(){var g=this.target||this.srcElement;return g?$(g):null;},getRelatedTarget:function(){var g=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return g?$(g):null;},getModifiers:function(){var g={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};g.access=ua.osx()?g.control:g.alt;g.any=g.control||g.shift||g.alt||g.meta;return g;}});copy_properties(Event,{listen:function(h,p,j,m){if(typeof h=='string')h=$(h);if(typeof m=='undefined')m=Event.Priority.NORMAL;if(typeof p=='object'){var i={};for(var o in p)i[o]=Event.listen(h,o,p[o],m);return i;}if(p.match(/^on/i))throw new TypeError("Bad event name `"+event+"': use `click', not `onclick'.");p=p.toLowerCase();var k=DataStore.get(h,b,{});if(f[p]){var g=f[p];p=g.base;j=g.wrap(j);}a(h,p);var q=k[p];if(!(m in q))q[m]=[];var l=q[m].length,n=new EventHandlerRef(j,q[m],l);q[m].push(n);return n;},stop:function(g){return $E(g).stop();},prevent:function(g){return $E(g).prevent();},kill:function(g){return $E(g).kill();},getKeyCode:function(event){event=$E(event);if(!event)return false;switch(event.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34;}if(event.shiftKey)switch(event.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null;}return event.keyCode;},getPriorities:function(){if(!e){var g=values(Event.Priority);g.sort(function(h,i){return h-i;});e=g;}return e;},__fire:function(g,i,event){var h=Event.__getHandler(g,i);if(h)return h($E(event));},__getHandler:function(g,h){return DataStore.get(g,Event.DATASTORE_KEY+h);}});var e=null,b=Event.DATASTORE_KEY;var c=function(g){return function(h){if(!DOM.contains(this,h.getRelatedTarget()))return g.call(this,h);};};var f={mouseenter:{base:'mouseover',wrap:c},mouseleave:{base:'mouseout',wrap:c}};var a=function(g,l){var h='on'+l;var k=d.bind(g);var j=DataStore.get(g,b);if(l in j)return;j[l]={};if(g.addEventListener){g.addEventListener(l,k,false);}else if(g.attachEvent)g.attachEvent(h,k);DataStore.set(g,b+l,k);if(g[h]){var i=g[h];g[h]=null;Event.listen(g,l,i,Event.Priority.TRADITIONAL);}if(g.nodeName==='FORM'&&l==='submit')Event.listen(g,l,Event.__bubbleSubmit.curry(g),Event.Priority._BUBBLE);};var d=function(event){event=$E(event);var n=event.type;if(!DataStore.get(this,b))throw new Error("Bad listenHandler context.");var o=DataStore.get(this,b)[n];if(!o)throw new Error("No registered handlers for `"+n+"'.");if(n=='click'){var i=Parent.byTag(event.getTarget(),'a');user_action(i,n,event);}var k=Event.getPriorities();for(var j=0;j<k.length;j++){var l=k[j];if(l in o){var g=o[l];for(var h=0;h<g.length;h++){if(!g[h])continue;var m=g[h].fire(this,event);if(m===false){return event.kill();}else if(event.cancelBubble)return event.stop();}}}return event.returnValue;};})();Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1000};function EventHandlerRef(b,a,c){this._handler=b;this._container=a;this._index=c;}EventHandlerRef.prototype={remove:function(){delete this._handler;delete this._container[this._index];},fire:function(a,event){return this._handler.call(a,event);}};
function Vector2(b,c,a){copy_properties(this,{x:parseFloat(b),y:parseFloat(c),domain:a||'pure'});}copy_properties(Vector2.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(c,d){if(arguments.length==1){if(c.domain!='pure')c=c.convertTo(this.domain);return this.add(c.x,c.y);}var a=parseFloat(c);var b=parseFloat(d);return new Vector2(this.x+a,this.y+b,this.domain);},mul:function(a,b){if(typeof(b)=="undefined")b=a;return new Vector2(this.x*a,this.y*b,this.domain);},sub:function(a,b){if(arguments.length==1){return this.add(a.mul(-1));}else return this.add(-a,-b);},distanceTo:function(a){return this.sub(a).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(a){if(a!='pure'&&a!='viewport'&&a!='document')return new Vector2(0,0);if(a==this.domain)return new Vector2(this.x,this.y,this.domain);if(a=='pure')return new Vector2(this.x,this.y);if(this.domain=='pure')return new Vector2(0,0);var b=Vector2.getScrollPosition('document');var c=this.x,d=this.y;if(this.domain=='document'){c-=b.x;d-=b.y;}else{c+=b.x;d+=b.y;}return new Vector2(c,d,a);},setElementPosition:function(a){var b=this.convertTo('document');a.style.left=parseInt(b.x)+'px';a.style.top=parseInt(b.y)+'px';return this;},setElementDimensions:function(a){return this.setElementWidth(a).setElementHeight(a);},setElementWidth:function(a){a.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(a){a.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(a){if(a==document.body){window.scrollBy(this.x,this.y);}else{a.scrollLeft+=this.x;a.scrollTop+=this.y;}return this;}});copy_properties(Vector2,{getEventPosition:function(b,a){a=a||'document';b=$E(b);var d=b.pageX||(b.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));var e=b.pageY||(b.clientY+(document.documentElement.scrollTop||document.body.scrollTop));var c=new Vector2(d,e,'document');return c.convertTo(a);},getScrollPosition:function(a){a=a||'document';var b=document.body.scrollLeft||document.documentElement.scrollLeft;var c=document.body.scrollTop||document.documentElement.scrollTop;return new Vector2(b,c,'document').convertTo(a);},getElementPosition:function(c,b){b=b||'document';if(!c)return;if(!('getBoundingClientRect' in c))return new Vector2(0,0,'document');var e=c.getBoundingClientRect(),a=document.documentElement,d=Math.round(e.left)-a.clientLeft,f=Math.round(e.top)-a.clientTop;return new Vector2(d,f,'viewport').convertTo(b);},getElementDimensions:function(a){return new Vector2(a.offsetWidth||0,a.offsetHeight||0);},getViewportDimensions:function(){var a=(window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0;var b=(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return new Vector2(a,b,'viewport');},getDocumentDimensions:function(){var a=(document&&document.documentElement&&document.documentElement.scrollWidth)||(document&&document.body&&document.body.scrollWidth)||0;var b=(document&&document.documentElement&&document.documentElement.scrollHeight)||(document&&document.body&&document.body.scrollHeight)||0;return new Vector2(a,b,'document');},deserialize:function(b){var a=b.split(',');return new Vector2(a[0],a[1]);}});var operaIgnoreScroll={table:true,'inline-table':true,inline:true};function elementX(a){return Vector2.getElementPosition(a,'document').x;}function elementY(a){return Vector2.getElementPosition(a,'document').y;}
var PopupResizer={_opts:{allowShrink:true,timeout:100},init:function(a){copy_properties(PopupResizer._opts,a);PopupResizer._resizeCheck.recur(PopupResizer._opts.timeout);},_resizeCheck:function(){var e=Vector2.getViewportDimensions(),a=PopupResizer._getDocumentSize(),c=a.y-e.y,d=a.x-e.x;if(d<0)d=0;if(!PopupResizer._opts.allowShrink&&c<0)c=0;if(c||d)try{window.resizeBy(d,c);if(d)window.moveBy(d/-2,0);}catch(b){}},_getDocumentSize:function(){var a={x:ua.firefox()?document.documentElement.scrollWidth:document.body.scrollWidth,y:document.body.scrollHeight};if(a.x<=0||a.x>document.documentElement.scrollWidth)a.x=document.documentElement.scrollWidth;if(a.y<=0||a.y>document.documentElement.scrollHeight)a.y=document.documentElement.scrollHeight;if(window.Dialog&&Dialog.max_bottom&&Dialog.max_bottom>a.y)a.y=Dialog.max_bottom;return a;},open:function(i,b,j){var f=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,g=typeof window.screenY!='undefined'?window.screenY:window.screenTop,e=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth,d=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22),c=parseInt(f+((e-j)/2),10),h=parseInt(g+((d-b)/2.5),10),a=('width='+j+',height='+b+',left='+c+',top='+h);return window.open(i,'_blank',a);}};
function DOMControl(a){this.root=$(a);this.updating=false;DataStore.set(a,'DOMControl',this);}DOMControl.prototype={getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(a){if(!this.beginUpdate())return this;this.onupdate(a);this.endUpdate();}};DOMControl.getInstance=function(a){return DataStore.get(a,'DOMControl');};
add_properties('Input',{focus:function(a){try{a.focus();}catch(b){}},isEmpty:function(a){return !(/\S/).test(a.value||'')||CSS.hasClass(a,'DOMControl_placeholder');},getValue:function(a){return Input.isEmpty(a)?'':a.value;},setValue:function(b,c){CSS.removeClass(b,'DOMControl_placeholder');b.value=c;var a=DOMControl.getInstance(b);a&&a.resetHeight&&a.resetHeight();},setPlaceholder:function(a,b){a.setAttribute('title',b);a.setAttribute('placeholder',b);if(a==document.activeElement)return;if(Input.isEmpty(a)){CSS.conditionClass(a,'DOMControl_placeholder',b);a.value=b;}},reset:function(a){Input.setValue(a,'');var b=a.getAttribute('placeholder');b&&Input.setPlaceholder(a,b);a.style.height='';},setSubmitOnEnter:function(a,b){CSS.conditionClass(a,'enter_submit',b);},getSubmitOnEnter:function(a){return CSS.hasClass(a,'enter_submit');}});
String.prototype.trim=function(){if(this==window)return null;return this.replace(/^\s*|\s*$/g,'');};function trim(b){try{return String(b.toString()).trim();}catch(a){return '';}}String.prototype.startsWith=function(a){if(this==window)return null;return this.substring(0,a.length)==a;};String.prototype.endsWith=function(a){if(this==window)return null;return this.length>=a.length&&this.substring(this.length-a.length)==a;};String.prototype.hash32=function(){var a=2166136261;for(var b=0,c=this.length;b<c;++b)a=(a^this.charCodeAt(b))*16777619;a+=a<<13;a^=a>>7;a+=a<<3;a^=a>>17;a+=a<<5;return (a|0)+2147483648;};String.prototype.split=(function(a){return function(h,e){var b="";if(h===null||e===null){return [];}else if(typeof h=='string'){return a.call(this,h,e);}else if(h===undefined){return [this.toString()];}else if(h instanceof RegExp){if(!h._2||!h._1){b=h.toString().replace(/^[\S\s]+\//,"");if(!h._1)if(!h.global){h._1=new RegExp(h.source,"g"+b);}else h._1=1;}separator1=h._1===1?h:h._1;var i=(h._2?h._2:h._2=new RegExp("^"+separator1.source+"$",b));if(e===undefined||e<0){e=false;}else{e=Math.floor(e);if(!e)return [];}var f,g=[],d=0,c=0;while((e?c++<=e:true)&&(f=separator1.exec(this))){if((f[0].length===0)&&(separator1.lastIndex>f.index))separator1.lastIndex--;if(separator1.lastIndex>d){if(f.length>1)f[0].replace(i,function(){for(var j=1;j<arguments.length-2;j++)if(arguments[j]===undefined)f[j]=undefined;});g=g.concat(this.substring(d,f.index),(f.index===this.length?[]:f.slice(1)));d=separator1.lastIndex;}if(f[0].length===0)separator1.lastIndex++;}return (d===this.length)?(separator1.test("")?g:g.concat("")):(e?g:g.concat(this.substring(d)));}else return a.call(this,h,e);};})(String.prototype.split);
add_properties('CSS',{shown:function(a){return !CSS.hasClass(a,'hidden_elem');},toggle:function(a){CSS.conditionShow(a,!CSS.shown(a));},setClass:function(b,a){$(b).className=a||'';return b;},setStyle:function(a,b,d){switch(b){case 'opacity':var c=(d==1);a.style.opacity=c?'':''+d;a.style.filter=c?'':'alpha(opacity='+d*100+')';break;case 'float':a.style.cssFloat=a.style.styleFloat=d;break;default:b=b.replace(/-(.)/g,function(e,f){return f.toUpperCase();});a.style[b]=d;}return a;},getStyle:function(b,d){b=$(b);function c(e){return e.replace(/([A-Z])/g,'-$1').toLowerCase();}if(window.getComputedStyle){var a=window.getComputedStyle(b,null);if(a)return a.getPropertyValue(c(d));}if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(b,null);if(a)return a.getPropertyValue(c(d));if(d=="display")return "none";}if(b.currentStyle)return b.currentStyle[d];return b.style[d];},getOpacity:function(a){a=$(a);var b=CSS.getStyle(a,'filter');var c=null;if(b&&(c=/(\d+(?:\.\d+)?)/.exec(b))){return parseFloat(c.pop())/100;}else if(b=CSS.getStyle(a,'opacity')){return parseFloat(b);}else return 1;}});
function animation(a){if(a==undefined)return;if(this==window){return new animation(a);}else{this.obj=a;this._reset_state();this.queue=[];this.last_attr=null;}}animation.resolution=20;animation.offset=0;animation.prototype._reset_state=function(){this.state={attrs:{},duration:500};};animation.prototype.stop=function(){this._reset_state();this.queue=[];return this;};animation.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var b=document.createElement('div');b.style.padding='0px';b.style.margin='0px';b.style.border='0px';b.__animation_refs=1;var a=this.obj.childNodes;while(a.length)b.appendChild(a[0]);this.obj.appendChild(b);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=b;this._refresh_container();};animation.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};animation.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var a=this.container_div.childNodes;while(a.length)this.obj.appendChild(a[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};animation.ATTR_TO=1;animation.ATTR_BY=2;animation.ATTR_FROM=3;animation.prototype._attr=function(a,d,c){a=a.replace(/-[a-z]/gi,function(e){return e.substring(1).toUpperCase();});var b=false;switch(a){case 'background':this._attr('backgroundColor',d,c);return this;case 'margin':d=animation.parse_group(d);this._attr('marginBottom',d[0],c);this._attr('marginLeft',d[1],c);this._attr('marginRight',d[2],c);this._attr('marginTop',d[3],c);return this;case 'padding':d=animation.parse_group(d);this._attr('paddingBottom',d[0],c);this._attr('paddingLeft',d[1],c);this._attr('paddingRight',d[2],c);this._attr('paddingTop',d[3],c);return this;case 'backgroundColor':case 'borderColor':case 'color':d=animation.parse_color(d);break;case 'opacity':d=parseFloat(d,10);break;case 'height':case 'width':if(d=='auto'){b=true;}else d=parseInt(d,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':d=parseInt(d,10);break;default:throw new Error(a+' is not a supported attribute!');}if(this.state.attrs[a]===undefined)this.state.attrs[a]={};if(b)this.state.attrs[a].auto=true;switch(c){case animation.ATTR_FROM:this.state.attrs[a].start=d;break;case animation.ATTR_BY:this.state.attrs[a].by=true;case animation.ATTR_TO:this.state.attrs[a].value=d;break;}};animation._get_box_width=function(c){var d=parseInt(CSS.getStyle(c,'paddingLeft'),10),e=parseInt(CSS.getStyle(c,'paddingRight'),10),a=parseInt(CSS.getStyle(c,'borderLeftWidth'),10),b=parseInt(CSS.getStyle(c,'borderRightWidth'),10);return c.offsetWidth-(d?d:0)-(e?e:0)-(a?a:0)-(b?b:0);};animation._get_box_height=function(c){var e=parseInt(CSS.getStyle(c,'paddingTop'),10),d=parseInt(CSS.getStyle(c,'paddingBottom'),10),a=parseInt(CSS.getStyle(c,'borderTopWidth'),10),b=parseInt(CSS.getStyle(c,'borderBottomWidth'),10);return c.offsetHeight-(e?e:0)-(d?d:0)-(a?a:0)-(b?b:0);};animation.prototype.to=function(a,b){if(b===undefined){this._attr(this.last_attr,a,animation.ATTR_TO);}else{this._attr(a,b,animation.ATTR_TO);this.last_attr=a;}return this;};animation.prototype.by=function(a,b){if(b===undefined){this._attr(this.last_attr,a,animation.ATTR_BY);}else{this._attr(a,b,animation.ATTR_BY);this.last_attr=a;}return this;};animation.prototype.from=function(a,b){if(b===undefined){this._attr(this.last_attr,a,animation.ATTR_FROM);}else{this._attr(a,b,animation.ATTR_FROM);this.last_attr=a;}return this;};animation.prototype.duration=function(a){this.state.duration=a?a:0;return this;};animation.prototype.checkpoint=function(b,a){if(b===undefined)b=1;this.state.checkpoint=b;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=a;return this;};animation.prototype.blind=function(){this.state.blind=true;return this;};animation.prototype.hide=function(){this.state.hide=true;return this;};animation.prototype.show=function(){this.state.show=true;return this;};animation.prototype.ease=function(a){this.state.ease=a;return this;};animation.prototype.go=function(){var b=(new Date()).getTime();this.queue.push(this.state);for(var a=0;a<this.queue.length;a++){this.queue[a].start=b-animation.offset;if(this.queue[a].checkpoint)b+=this.queue[a].checkpoint*this.queue[a].duration;}animation.push(this);return this;};animation.prototype._show=function(){CSS.show(this.obj);};animation.prototype._hide=function(){CSS.hide(this.obj);};animation.prototype._frame=function(m){var c=true;var l=false;var o=false;var n;function d(p){return document.documentElement[p]||document.body[p];}for(var e=0;e<this.queue.length;e++){var b=this.queue[e];if(b.start>m){c=false;continue;}if(b.checkpointcb){this._callback(b.checkpointcb,m-b.start);b.checkpointcb=null;}if(b.started===undefined){if(b.show)this._show();for(var a in b.attrs){if(b.attrs[a].start!==undefined)continue;switch(a){case 'backgroundColor':case 'borderColor':case 'color':var n=animation.parse_color(CSS.getStyle(this.obj,a=='borderColor'?'borderLeftColor':a));if(b.attrs[a].by){b.attrs[a].value[0]=Math.min(255,Math.max(0,b.attrs[a].value[0]+n[0]));b.attrs[a].value[1]=Math.min(255,Math.max(0,b.attrs[a].value[1]+n[1]));b.attrs[a].value[2]=Math.min(255,Math.max(0,b.attrs[a].value[2]+n[2]));}break;case 'opacity':var n=CSS.getOpacity(this.obj);if(b.attrs[a].by)b.attrs[a].value=Math.min(1,Math.max(0,b.attrs[a].value+n));break;case 'height':var n=animation._get_box_height(this.obj);if(b.attrs[a].by)b.attrs[a].value+=n;break;case 'width':var n=animation._get_box_width(this.obj);if(b.attrs[a].by)b.attrs[a].value+=n;break;case 'scrollLeft':case 'scrollTop':n=(this.obj===document.body)?d(a):this.obj[a];if(b.attrs[a].by)b.attrs[a].value+=n;b['last'+a]=n;break;default:var n=parseInt(CSS.getStyle(this.obj,a),10)||0;if(b.attrs[a].by)b.attrs[a].value+=n;break;}b.attrs[a].start=n;}if((b.attrs.height&&b.attrs.height.auto)||(b.attrs.width&&b.attrs.width.auto)){if(ua.firefox()<3)o=true;this._destroy_container();for(var a in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(b.attrs[a])this.obj.style[a]=b.attrs[a].value+(typeof b.attrs[a].value=='number'?'px':'');if(b.attrs.height&&b.attrs.height.auto)b.attrs.height.value=animation._get_box_height(this.obj);if(b.attrs.width&&b.attrs.width.auto)b.attrs.width.value=animation._get_box_width(this.obj);}b.started=true;if(b.blind)this._build_container();}var i=(m-b.start)/b.duration;if(i>=1){i=1;if(b.hide)this._hide();}else c=false;var k=b.ease?b.ease(i):i;if(!l&&i!=1&&b.blind)l=true;if(o&&this.obj.parentNode){var j=this.obj.parentNode;var h=this.obj.nextSibling;j.removeChild(this.obj);}for(var a in b.attrs)switch(a){case 'backgroundColor':case 'borderColor':case 'color':this.obj.style[a]='rgb('+animation.calc_tween(k,b.attrs[a].start[0],b.attrs[a].value[0],true)+','+animation.calc_tween(k,b.attrs[a].start[1],b.attrs[a].value[1],true)+','+animation.calc_tween(k,b.attrs[a].start[2],b.attrs[a].value[2],true)+')';break;case 'opacity':CSS.setStyle(this.obj,'opacity',animation.calc_tween(k,b.attrs[a].start,b.attrs[a].value));break;case 'height':case 'width':this.obj.style[a]=k==1&&b.attrs[a].auto?'auto':animation.calc_tween(k,b.attrs[a].start,b.attrs[a].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var f=this.obj===document.body;n=f?d(a):this.obj[a];if(b['last'+a]!==n){delete b.attrs[a];}else{var g=animation.calc_tween(k,b.attrs[a].start,b.attrs[a].value,true);if(!f){g=this.obj[a]=g;}else{if(a=='scrollLeft'){window.scrollTo(g,d('scrollTop'));}else window.scrollTo(d('scrollLeft'),g);g=d(a);}b['last'+a]=g;}break;default:this.obj.style[a]=animation.calc_tween(k,b.attrs[a].start,b.attrs[a].value,true)+'px';break;}if(i==1){this.queue.splice(e--,1);this._callback(b.ondone,m-b.start-b.duration);}}if(o)j[h?'insertBefore':'appendChild'](this.obj,h);if(!l&&this.container_div)this._destroy_container();return !c;};animation.prototype.ondone=function(a){this.state.ondone=a;return this;};animation.prototype._callback=function(a,b){if(a){animation.offset=b;a.call(this);animation.offset=0;}};animation.calc_tween=function(a,b,c,d){return (d?parseInt:parseFloat)((c-b)*a+b,10);};animation.parse_color=function(a){var b=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(a);if(b){return [parseInt(b[1].length==1?b[1]+b[1]:b[1],16),parseInt(b[2].length==1?b[2]+b[2]:b[2],16),parseInt(b[3].length==1?b[3]+b[3]:b[3],16)];}else{var c=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9]+))?\)$/.exec(a);if(c){if(c[4]==='0'){return [255,255,255];}else return [parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)];}else if(a=='transparent'){return [255,255,255];}else throw 'Named color attributes are not supported.';}};animation.parse_group=function(a){var a=trim(a).split(/ +/);if(a.length==4){return a;}else if(a.length==3){return [a[0],a[1],a[2],a[1]];}else if(a.length==2){return [a[0],a[1],a[0],a[1]];}else return [a[0],a[0],a[0],a[0]];};animation.push=function(a){if(!animation.active)animation.active=[];animation.active.push(a);if(!animation.timeout)animation.timeout=setInterval(animation.animate.bind(animation),animation.resolution,false);animation.animate(true);};animation.animate=function(c){var d=(new Date()).getTime();for(var b=c===true?animation.active.length-1:0;b<animation.active.length;b++)try{if(!animation.active[b]._frame(d))animation.active.splice(b--,1);}catch(a){animation.active.splice(b--,1);}if(animation.active.length==0){clearInterval(animation.timeout);animation.timeout=null;}};animation.ease={};animation.ease.begin=function(a){return Math.sin(Math.PI/2*(a-1))+1;};animation.ease.end=function(a){return Math.sin(.5*Math.PI*a);};animation.ease.both=function(a){return .5*Math.sin(Math.PI*(a-.5))+.5;};animation.prependInsert=function(b,a){animation.insert(b,a,DOM.prependContent);};animation.appendInsert=function(b,a){animation.insert(b,a,DOM.appendContent);};animation.insert=function(c,a,b){CSS.setStyle(a,'opacity',0);b(c,a);animation(a).from('opacity',0).to('opacity',1).duration(400).go();};
!function(){function a(b){return function(){if(this===window)throw new TypeError();return b.apply(this,arguments);};}copy_properties(Array.prototype,{map:function(c,b){if(this===window||typeof c!='function')throw new TypeError();var d;var e=this.length;var f=new Array(e);for(d=0;d<e;++d)if(d in this)f[d]=c.call(b,this[d],d,this);return f;},forEach:function(c,b){this.map(c,b);return this;},filter:function(c,b){c=c||function(h){return h;};if(this===window||typeof c!='function')throw new TypeError();var d,g,e=this.length,f=[];for(d=0;d<e;++d)if(d in this){g=this[d];if(c.call(b,g,d,this))f.push(g);}return f;},every:function(d,c){var b=this.filter(function(){return 1;});return (this.filter(d,c).length==b.length);},some:function(c,b){return (this.filter(c,b).length>0);},reduce:null,reduceRight:null,sort:a(Array.prototype.sort),reverse:a(Array.prototype.reverse),concat:a(Array.prototype.concat),slice:a(Array.prototype.slice),indexOf:a(Array.prototype.indexOf||function(d,b){var c=this.length;b|=0;if(b<0)b+=c;for(;b<c;b++)if(b in this&&this[b]===d)return b;return -1;}),contains:function(b){return this.indexOf(b)!=-1;},remove:function(c){var b=this.indexOf(c);if(b!=-1)this.splice(b,1);}});Array.prototype.each=Array.prototype.forEach;Array.prototype.clone=Array.prototype.slice;}();
add_properties('CSS',{supportsBorderRadius:function(){var c=['KhtmlBorderRadius','OBorderRadius','MozBorderRadius','WebkitBorderRadius','msBorderRadius','borderRadius'];var d=false,a=document.createElement('div');for(var b=c.length;b>=0;b--)if(d=a.style[c[b]]!==undefined)break;CSS.supportsBorderRadius=bagof(d);return d;}});
function show(){for(var b=0;b<arguments.length;b++){var a=ge(arguments[b]);if(a&&a.style)a.style.display='';}return false;}function hide(){for(var b=0;b<arguments.length;b++){var a=ge(arguments[b]);if(a&&a.style)a.style.display='none';}return false;}function shown(a){a=ge(a);return (a.style.display!='none'&&!(a.style.display==''&&a.offsetWidth==0));}function toggle(){for(var b=0;b<arguments.length;b++){var a=$(arguments[b]);a.style.display=CSS.getStyle(a,"display")=='block'?'none':'block';}return false;}function toggleDisplayNone(){for(var b=0;b<arguments.length;b++){var a=$(arguments[b]);if(shown(a)){hide(a);}else show(a);}return false;}
function tx(b,a){if(typeof _string_table=='undefined')return;b=_string_table[b];return _tx(b,a);}function intl_ends_in_punct(a){if(typeof a!='string')return false;return a.match(new RegExp(intl_ends_in_punct.punct_char_class+'['+')"'+"'"+'\u00BB'+'\u0F3B'+'\u0F3D'+'\u2019'+'\u201D'+'\u203A'+'\u3009'+'\u300B'+'\u300D'+'\u300F'+'\u3011'+'\u3015'+'\u3017'+'\u3019'+'\u301B'+'\u301E'+'\u301F'+'\uFD3F'+'\uFF07'+'\uFF09'+'\uFF3D'+'\s'+']*$'));}intl_ends_in_punct.punct_char_class='['+'.!?'+'\u3002'+'\uFF01'+'\uFF1F'+'\u0964'+'\u2026'+'\u0EAF'+'\u1801'+'\u0E2F'+'\uFF0E'+']';function intl_render_list_separator(){return _tx("{previous-items}, {next-items}",{'previous-items':'','next-items':''});}function intl_phonological_rules(e){var c,b=e,d=window.intl_locale_rewrites;try{if(d){var pats=[],reps=[];for(var p in d.patterns){var pat=p,rep=d.patterns[p];for(var m in d.meta){c=new RegExp(m.slice(1,-1),'g');pat=pat.replace(c,d.meta[m]);rep=rep.replace(c,d.meta[m]);}pats[pats.length]=pat;reps[reps.length]=rep;}for(var ii=0;ii<pats.length;ii++){c=new RegExp(pats[ii].slice(1,-1),'g');if(reps[ii]=='javascript'){if(m=new String(e.match(c)))e=e.replace(c,m.slice(1).toLowerCase());}else e=e.replace(c,reps[ii]);}}}catch(a){e=b;}c=new RegExp('\x01','g');e=e.replace(c,'');return e;}function _tx(e,a){if(!a)return e;var d;for(var c in a){if(intl_ends_in_punct(a[c])){d=new RegExp('\\{'+c+'\\}'+intl_ends_in_punct.punct_char_class+'*','g');}else d=new RegExp('\\{'+c+'\\}','g');var b='';if(a[c][0]!='~')b='\x01';e=e.replace(d,b+a[c]+b);}e=intl_phonological_rules(e);return e;}
function intl_locale_is_rtl(){return ('rtl'==CSS.getStyle(document.body,'direction'));}
var KEYS={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188};
OnloadEvent={ONLOAD:'onload/onload',ONLOAD_CALLBACK:'onload/onload_callback',ONLOAD_DOMCONTENT:'onload/dom_content_ready',ONLOAD_DOMCONTENT_CALLBACK:'onload/domcontent_callback',ONBEFOREUNLOAD:'onload/beforeunload',ONUNLOAD:'onload/unload'};function _include_quickling_events_default(){return !window.loading_page_chrome;}function onbeforeunloadRegister(a,b){if(b===undefined)b=_include_quickling_events_default();b?_addHook('onbeforeleavehooks',a):_addHook('onbeforeunloadhooks',a);}function onunloadRegister(a){if(!window.onunload)window.onunload=function(){Arbiter.inform(OnloadEvent.ONUNLOAD,true,Arbiter.BEHAVIOR_STATE);};_addHook('onunloadhooks',a);}function onleaveRegister(a){_addHook('onleavehooks',a);}function _addHook(b,a){window[b]=(window[b]||[]).concat(a);}function removeHook(a){window[a]=[];}function _domcontentready(){Arbiter.inform(OnloadEvent.ONLOAD_DOMCONTENT,true,Arbiter.BEHAVIOR_STATE);}function _bootstrapEventHandlers(){var a=document,e=window;if(a.addEventListener){if(ua.safari()<525){var d=setInterval(function(){if(/loaded|complete/.test(a.readyState)){_domcontentready();clearInterval(d);}},10);}else a.addEventListener("DOMContentLoaded",_domcontentready,true);}else{var c='javascript:void(0)';if(e.location.protocol=='https:')c='//:';a.write('<script onreadystatechange="if (this.readyState==\'complete\') {'+'this.parentNode.removeChild(this);_domcontentready();}" '+'defer="defer" src="'+c+'"><\/script\>');}var b=e.onload;e.onload=function(){e.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_layout');b&&b();Arbiter.inform(OnloadEvent.ONLOAD,true,Arbiter.BEHAVIOR_STATE);};e.onbeforeunload=function(){var f={};Arbiter.inform(OnloadEvent.ONBEFOREUNLOAD,f,Arbiter.BEHAVIOR_STATE);if(!f.warn)Arbiter.inform('onload/exit',true);return f.warn;};}onload_callback=Arbiter.registerCallback(function(){window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_onload');Arbiter.inform(OnloadEvent.ONLOAD_CALLBACK,true,Arbiter.BEHAVIOR_STATE);},[OnloadEvent.ONLOAD]);domcontent_callback=Arbiter.registerCallback(function(){window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_domcontent');Arbiter.inform(OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,true,Arbiter.BEHAVIOR_STATE);},[OnloadEvent.ONLOAD_DOMCONTENT]);if(!window._eventHandlersBootstrapped){_eventHandlersBootstrapped=true;_bootstrapEventHandlers();}
function AsyncSignal(b,a){this.data=a||{};if(window.Env&&Env.tracking_domain&&b.charAt(0)=='/')b=Env.tracking_domain+b;this.uri=b;this.handler=null;}AsyncSignal.prototype.setHandler=function(a){this.handler=a;return this;};AsyncSignal.prototype.send=function(){var c=this.handler,b=this.data,g=this.uri,f=[],d=new Image(),a=document.getElementById('post_form_id');b.asyncSignal=Math.floor(Math.random()*10000)+1;if(a)b.post_form_id=a.value;for(var e in b)f.push(encodeURIComponent(e)+'='+encodeURIComponent(b[e]));if(g.indexOf('?')==-1)g+='?';g+=f.join('&');if(c)d.onload=d.onerror=(function(i,h){return function(){h((i.height==1));};})(d,c);d.src=g;return this;};
function setCookie(a,b,d,e){if(env_get('no_cookies')&&a!='tpa')return;if(d){var f=new Date();var c=new Date();c.setTime(f.getTime()+d);}document.cookie=a+"="+encodeURIComponent(b)+"; "+(d?"expires="+c.toGMTString()+"; ":"")+"path="+(e||'/')+"; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}function clearCookie(a){document.cookie=a+"=; expires=Sat, 01 Jan 2000 00:00:00 GMT; "+"path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}function getCookie(d){var e=d+"=";var b=document.cookie.split(';');for(var c=0;c<b.length;c++){var a=b[c];while(a.charAt(0)==' ')a=a.substring(1,a.length);if(a.indexOf(e)==0)return decodeURIComponent(a.substring(e.length,a.length));}return null;}
function goURI(b,a){b=b.toString();if(!a&&window.PageTransitions&&PageTransitions.isInitialized()){PageTransitions.go(b);}else if(window.location.href==b){window.location.reload();}else window.location.href=b;}function loadExternalJavascript(f,b,a){if(f instanceof Array){var e=f.shift(0);if(e){loadExternalJavascript(e,function(){if(f.length){loadExternalJavascript(f,b,a);}else b&&b();},a);}else if(b)b();}else{var c=a?document.body:document.getElementsByTagName('head')[0];var d=document.createElement('script');d.type='text/javascript';d.src=f;if(b){d.onerror=d.onload=b;d.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded")b();};}c.appendChild(d);return d;}}function invoke_callbacks(b,d){if(b)for(var c=0;c<b.length;c++)try{(new Function(b[c])).apply(d);}catch(a){}}
var ErrorDialog={showAsyncError:function(b){try{return ErrorDialog.show(b.getErrorSummary(),b.getErrorDescription());}catch(a){alert(b);}},show:function(d,c,b,a){return (new Dialog()).setTitle(d).setBody(c).setButtons([Dialog.OK]).setStackable(true).setClassName('errorDialog').setModal(true).setHandler(b||bagofholding).setButtonsMessage(a||'').show();}};
add_properties('Form',{getInputs:function(a){a=a||document;return [].concat($A(DOM.scry(a,'input')),$A(DOM.scry(a,'select')),$A(DOM.scry(a,'textarea')),$A(DOM.scry(a,'button')));},getSelectValue:function(a){return a.options[a.selectedIndex].value;},setSelectValue:function(b,c){for(var a=0;a<b.options.length;++a)if(b.options[a].value==c){b.selectedIndex=a;break;}},getRadioValue:function(b){for(var a=0;a<b.length;a++)if(b[a].checked)return b[a].value;return null;},getElements:function(a){return $A(a.tagName=='FORM'?a.elements:Form.getInputs(a));},getAttribute:function(b,a){return (b.getAttributeNode(a)||{}).value||null;},setDisabled:function(b,a){Form.getElements(b).forEach(function(c){if(c.disabled!=undefined){var d=DataStore.get(c,'origDisabledState');if(a){if(d===undefined)DataStore.set(c,'origDisabledState',c.disabled);c.disabled=a;}else{if(d!==true)c.disabled=false;DataStore.remove(c,'origDisabledState');}}});},bootstrap:function(d,e){var f=(Form.getAttribute(d,'method')||'GET').toUpperCase();e=Parent.byTag(e,'button')||e;var g=DOMPath.findNodePath(d);var i=Parent.byClass(e,'stat_elem')||d;if(CSS.hasClass(i,'async_saving'))return;if(e&&(e.form!==d||(e.nodeName!='INPUT'&&e.nodeName!='BUTTON')||e.type!='submit')){var j=DOM.scry(d,'.enter_submit_target')[0];var b=e;j&&(e=j);}var c=Form.serialize(d,e);Form.setDisabled(d,true);var a=Form.getAttribute(d,'ajaxify')||Form.getAttribute(d,'action');trackReferrer(d,a);var h=new AsyncRequest(a);h.setData(c).setNectarModuleDataSafe(d).setReadOnly(f=='GET').setMethod(f).setRelativeTo(d).setStatusElement(i).setHandler(function(k){if(k.isReplay())h.setRelativeTo(DOMPath.resolveNodePath(g));}).setFinallyHandler(Form.setDisabled.bind(null,d,false)).send();},serialize:function(b,c){var a={};Form.getElements(b).forEach(function(d){if(d.name&&!d.disabled&&d.type!='submit')if(!d.type||((d.type=='radio'||d.type=='checkbox')&&d.checked)||d.type=='text'||d.type=='password'||d.type=='hidden'||d.tagName=='TEXTAREA'){var h;if(d.name=='post_form_id')h=Env.post_form_id;Form._serializeHelper(a,d.name,h||Input.getValue(d));}else if(d.tagName=='SELECT')for(var e=0,f=d.options.length;e<f;++e){var g=d.options[e];if(g.selected)Form._serializeHelper(a,d.name,g.value);}});if(c&&c.name&&'submit'==c.type&&DOM.contains(b,c)&&DOM.isNode(c,['input','button']))Form._serializeHelper(a,c.name,c.value);return Form._serializeFix(a);},_serializeHelper:function(a,d,e){var c=/([^\]]+)\[([^\]]*)\](.*)/.exec(d);if(c){a[c[1]]=a[c[1]]||{};if(c[2]==''){var b=0;while(a[c[1]][b]!=undefined)b++;}else b=c[2];if(c[3]==''){a[c[1]][b]=e;}else Form._serializeHelper(a[c[1]],b.concat(c[3]),e);}else a[d]=e;},_serializeFix:function(a){var e=[];for(var b in a){if(a instanceof Object)a[b]=Form._serializeFix(a[b]);e.push(b);}var d=0,c=true;e.sort().each(function(g){if(g!=d++)c=false;});if(c){var f={};e.each(function(g){f[g]=a[g];});return f;}else return a;},post:function(d,b,c){var a=document.createElement('form');a.action=d.toString();a.method='POST';a.style.display='none';if(c)a.target=c;if(ge('post_form_id'))b.post_form_id=$('post_form_id').value;b.fb_dtsg=Env.fb_dtsg;b.post_form_id_source='dynamic_post';b.next=htmlspecialchars(document.location.href);Form.createHiddenInputs(b,a);DOM.getRootElement().appendChild(a);a.submit();return false;},createHiddenInputs:function(g,a,d,f){d=d||{};var c;var h=URI.implodeQuery(g,'',false);var i=h.split('&');for(var b=0;b<i.length;b++)if(i[b]){var j=i[b].split('=');var e=j[0];var k=j[1];if(e===undefined||k===undefined)continue;k=URI.decodeComponent(k);if(d[e]&&f){d[e].value=k;}else{c=$N('input',{type:'hidden',name:e,value:k});d[e]=c;a.appendChild(c);}}return d;},getFirstElement:function(b){var f=['input[type="text"]','textarea','input[type="password"]','input[type="button"]','input[type="submit"]'];var e=[];for(var c=0;c<f.length&&e.length==0;c++)e=DOM.scry(b,f[c]);if(e.length>0){var d=e[0];try{if(elementY(d)>0&&elementX(d)>0)return d;}catch(a){}}return null;},focusFirst:function(b){var a=Form.getFirstElement(b);if(a){a.focus();return true;}return false;}});var DOMPath={findNodePath:function(c,e){e=e||[];if(c.id||!DOM.isNode(c.parentNode))return {id:c.id,path:e.reverse()};var d=c.parentNode;var b=d.childNodes;for(var a=0;a<b.length;++a)if(b[a]===c){e.push(a);return DOMPath.findNodePath(d,e);}return null;},resolveNodePath:function(a){var b=ge(a.id)||document.documentElement;return DOMPath._resolveNodePathChildren(a.path,b,0);},_resolveNodePathChildren:function(c,d,b){if(b===c.length)return d;var a=d.childNodes[c[b]];if(!a)return null;return DOMPath._resolveNodePathChildren(c,a,b+1);}};
function Dialog(a){this._show_loading=true;this._loading_was_shown=false;this._auto_focus=true;this._fade_enabled=true;this._onload_handlers=[];this._top=125;this._uniqueID='dialog_'+Dialog._globalCount++;this._content=null;this._obj=null;this._popup=null;this._overlay=null;this._shim=null;this._hidden_objects=[];this._causal_elem=null;if(a)this._setFromModel(a);Dialog._init();}Metaprototype.makeFinal(Dialog);copy_properties(Dialog,{OK:{name:'ok',label:_tx("Okay")},CANCEL:{name:'cancel',label:_tx("Cancel"),className:'inputaux'},CLOSE:{name:'close',label:_tx("Close")},NEXT:{name:'next',label:_tx("Next")},SAVE:{name:'save',label:_tx("Save")},SUBMIT:{name:'submit',label:_tx("Submit")},CONFIRM:{name:'confirm',label:_tx("Confirm")},DELETE:{name:'delete',label:_tx("Delete")},_globalCount:0,_bottoms:[0],max_bottom:0,_updateMaxBottom:function(){Dialog.max_bottom=Math.max.apply(Math,Dialog._bottoms);}});copy_properties(Dialog,{OK_AND_CANCEL:[Dialog.OK,Dialog.CANCEL],_STANDARD_BUTTONS:[Dialog.OK,Dialog.CANCEL,Dialog.CLOSE,Dialog.SAVE,Dialog.SUBMIT,Dialog.CONFIRM,Dialog.DELETE],SHOULD_HIDE_OBJECTS:!ua.windows(),_useCSSBorders:CSS.supportsBorderRadius()||ua.ie()<=6,SIZE:{WIDE:555,STANDARD:445},_HALO_WIDTH:10,_BORDER_WIDTH:1,_PADDING_WIDTH:10,MODALITY:{DARK:'dark',WHITE:'white'},_stack:[],newButton:function(e,d,b,c){var a={name:e,label:d};if(b)a.className=b;if(c)a.handler=c;return a;},getCurrent:function(){var a=Dialog._stack;return a.length?a[a.length-1]:null;},bootstrap:function(i,a,f,d,e,c){a=a||{};var j=c&&c.rel=='dialog-pipe';copy_properties(a,new URI(i).getQueryData());d=d||(f?'GET':'POST');var h=Parent.byClass(c,'stat_elem')||c;if(h&&CSS.hasClass(h,'async_saving'))return false;var g;if(j){g=new AjaxPipeRequest();}else g=new AsyncRequest().setReadOnly(!!f).setMethod(d).setRelativeTo(c).setStatusElement(h);g.setURI(i).setNectarModuleDataSafe(c).setData(a);var b=new Dialog(e).setCausalElement(c).setAsync(g,j);b.show();return false;},_init:function(){this._init=bagofholding;onleaveRegister(Dialog._tearDown.shield(null,false));Arbiter.subscribe('page_transition',Dialog._tearDown.shield(null,true));Event.listen(document.documentElement,'keydown',function(event){if(Event.getKeyCode(event)==KEYS.ESC&&!event.getModifiers().any)if(Dialog._escape())event.kill();});},_basicMutator:function(a){return function(b){this[a]=b;this._dirty();return this;};},_findButton:function(a,c){if(a)for(var b=0;b<a.length;++b)if(a[b].name==c)return a[b];return null;},_tearDown:function(b){var c=Dialog._stack.clone();for(var a=c.length-1;a>=0;a--)if(!(b&&c[a]._cross_transition))c[a].hide();},_escape:function(){var d=Dialog.getCurrent();if(!d)return false;var e=d._semi_modal;var b=d._buttons;if(!b&&!e)return false;if(e&&!b){d.hide();return true;}var a;var c=Dialog._findButton(b,'cancel');if(d._cancelHandler){d.cancel();return true;}else if(c){a=c;}else if(b.length==1){a=b[0];}else return false;d._handleButton(a);return true;},call_or_eval:function(obj,func,args){if(!func)return undefined;args=args||{};if(typeof(func)=='string'){var params=keys(args).join(', ');func=eval('({f: function('+params+') { '+func+'}})').f;}return func.apply(obj,values(args));}});copy_properties(Dialog.prototype,{_cross_transition:false,show:function(a){this._showing=true;if(a){if(this._overlay)this._overlay.style.display='';if(this._fade_enabled)CSS.setStyle(this._obj,'opacity',1);this._obj.style.display='';}else this._dirty();return this;},showLoading:function(){this._loading_was_shown=true;this._renderDialog($N('div',{className:'dialog_loading'},_tx("Loading...")));return this;},hide:function(a){if(!this._showing)return this;this._showing=false;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}if(this._fade_enabled&&Dialog._stack.length<=1){this._fadeOut(a);}else this._hide(a);return this;},cancel:function(){if(!this._cancelHandler||this._cancelHandler()!==false)this.hide();},getRoot:function(){return this._obj;},getBody:function(){return DOM.scry(this._obj,'div.dialog_body')[0];},getButtonElement:function(a){if(typeof a=='string')a=Dialog._findButton(this._buttons,a);if(!a||!a.name)return null;var b=DOM.scry(this._popup,'input');var c=function(d){return d.name==a.name;};return b.filter(c)[0]||null;},getContentNode:function(){return DOM.find(this._content,'div.dialog_content');},getFormData:function(){return Form.serialize(this.getContentNode());},setAllowCrossPageTransition:function(a){this._cross_transition=a;return this;},setShowing:function(){this.show();return this;},setHiding:function(){this.hide();return this;},setTitle:Dialog._basicMutator('_title'),setBody:Dialog._basicMutator('_body'),setExtraData:Dialog._basicMutator('_extra_data'),setReturnData:Dialog._basicMutator('_return_data'),setShowLoading:Dialog._basicMutator('_show_loading'),setFullBleed:Dialog._basicMutator('_full_bleed'),setImmediateRendering:function(a){this._immediate_rendering=a;return this;},setCausalElement:function(a){this._causal_elem=a;return this;},setUserData:Dialog._basicMutator('_user_data'),getUserData:function(){return this._user_data;},setAutohide:function(a){if(a){if(this._showing){this._autohide_timeout=setTimeout(this.hide.shield(this),a);}else this._autohide=a;}else{this._autohide=null;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}}return this;},setSummary:Dialog._basicMutator('_summary'),setButtons:function(a){var c;if(!(a instanceof Array)){c=$A(arguments);}else c=a;for(var d=0;d<c.length;++d)if(typeof c[d]=='string'){var b=Dialog._findButton(Dialog._STANDARD_BUTTONS,c[d]);c[d]=b;}this._buttons=c;this._updateButtons();return this;},setButtonsMessage:Dialog._basicMutator('_buttons_message'),setClickButtonOnEnter:function(b,a){this._clickButtonOnEnter=a;this._clickButtonOnEnterInputName=b;return this;},setStackable:function(b,a){this._is_stackable=b;this._shown_while_stacked=b&&a;return this;},setHandler:function(a){this._handler=a;return this;},setCancelHandler:function(a){this._cancelHandler=Dialog.call_or_eval.bind(null,this,a);return this;},setCloseHandler:function(a){this._close_handler=Dialog.call_or_eval.bind(null,this,a);return this;},clearHandler:function(){return this.setHandler(null);},setPostURI:function(b,a){if(a===undefined)a=true;if(a){this.setHandler(this._submitForm.bind(this,'POST',b));}else this.setHandler(function(){Form.post(b,this.getFormData());this.hide();}.bind(this));return this;},setGetURI:function(a){this.setHandler(this._submitForm.bind(this,'GET',a));return this;},setModal:function(a,b){if(a===undefined)a=true;if(a&&b)switch(b){case Dialog.MODALITY.DARK:this._modal_class='dark';break;case Dialog.MODALITY.WHITE:this._modal_class='white';break;}this._modal=a;return this;},setSemiModal:function(a){if(a===undefined)a=true;if(a)this.setModal(true,Dialog.MODALITY.DARK);this._semi_modal=a;return this;},setWideDialog:Dialog._basicMutator('_wide_dialog'),setContentWidth:Dialog._basicMutator('_content_width'),setTitleLoading:function(b){if(b===undefined)b=true;var a=DOM.find(this._popup,'h2.dialog_title');if(a)CSS.conditionClass(a,'loading',b);return this;},setSecure:Dialog._basicMutator('_secure'),setClassName:Dialog._basicMutator('_class_name'),setFadeEnabled:Dialog._basicMutator('_fade_enabled'),setFooter:Dialog._basicMutator('_footer'),setAutoFocus:Dialog._basicMutator('_auto_focus'),setTop:Dialog._basicMutator('_top'),onloadRegister:function(a){$A(a).forEach(function(b){if(typeof b=='string')b=new Function(b);this._onload_handlers.push(b.bind(this));}.bind(this));return this;},setAsyncURL:function(a){return this.setAsync(new AsyncRequest(a));},setAsync:function(a,f){var c=function(j){if(this._async_request!=a)return;this._async_request=null;var i=j.getPayload();var g=i;var h=function(){if(typeof g=='string'){this.setBody(g);}else this._setFromModel(g);this._update(true);}.bind(this);if(f){g=i.dialog;Bootloader.setResourceMap(i.resource_map);Bootloader.loadResources(i.css,h);}else h();}.bind(this);var b=a.getData();b.__d=1;a.setData(b);var d=bind(this,'hide');var e;if(f){a.setFirstResponseHandler(c);e=a.getAsyncRequest();}else{a.setHandler(chain(a.getHandler(),c));e=a;}e.setAllowCrossPageTransition(this._cross_transition).setErrorHandler(chain(d,e.getErrorHandler())).setTransportErrorHandler(chain(d,e.getTransportErrorHandler()));a.send();this._async_request=a;this._dirty();return this;},_dirty:function(){if(!this._is_dirty){this._is_dirty=true;if(this._immediate_rendering){this._update();}else bind(this,'_update',false).defer();}},_format:function(a){if(typeof a=='string'){a=HTML(a);}else a=HTML.replaceJSONWrapper(a);if(a instanceof HTML)a.setDeferred(true);return a;},_update:function(d){if(!this._is_dirty&&d!==true)return;this._is_dirty=false;if(!this._showing)return;if(this._autohide&&!this._async_request&&!this._autohide_timeout)this._autohide_timeout=setTimeout(bind(this,'hide'),this._autohide);if(!this._async_request||!this._show_loading){if(this._loading_was_shown===true){this._hide(true);this._loading_was_shown=false;}var b=[];if(this._summary)b.push($N('div',{className:'dialog_summary'},this._format(this._summary)));b.push($N('div',{className:'dialog_body'},this._format(this._body)));var a=this._getButtonContent();if(a.length)b.push($N('div',{className:'dialog_buttons clearfix'},a));if(this._footer)b.push($N('div',{className:'dialog_footer'},this._format(this._footer)));b=$N('div',{className:'dialog_content'},b);if(this._title){var g=$N('span',this._format(this._title));var h=$N('h2',{className:'dialog_title',id:'title_'+this._uniqueID},g);CSS.conditionClass(h,'secure',this._secure);b=[h,b];}else{CSS.addClass(b,'dialog_content_titleless');b=[b];}this._renderDialog(b);CSS.conditionClass(this.getRoot(),'omitDialogFooter',!a.length);if(this._clickButtonOnEnterInputName&&this._clickButtonOnEnter&&ge(this._clickButtonOnEnterInputName))Event.listen(ge(this._clickButtonOnEnterInputName),'keypress',function(i){if(Event.getKeyCode(i)==KEYS.RETURN)this._handleButton(this._clickButtonOnEnter);return true;}.bind(this));for(var f=0;f<this._onload_handlers.length;++f)try{this._onload_handlers[f]();}catch(e){}this._onload_handlers=[];}else this.showLoading();var c=2*Dialog._BORDER_WIDTH;if(Dialog._useCSSBorders)c+=2*Dialog._HALO_WIDTH;if(this._content_width){c+=this._content_width;if(!this._full_bleed)c+=2*Dialog._PADDING_WIDTH;}else if(this._wide_dialog){c+=Dialog.SIZE.WIDE;}else c+=Dialog.SIZE.STANDARD;this._popup.style.width=c+'px';},_updateButtons:function(){if(!this._showing)return;var b=this._getButtonContent();var c=null;if(!this.getRoot())this._buildDialog();CSS.conditionClass(this.getRoot(),'omitDialogFooter',!b.length);if(b.length)c=$N('div',{className:'dialog_buttons clearfix'},b);var d=DOM.scry(this._content,'div.dialog_buttons')[0]||null;if(!d){if(!c)return;var a=this.getBody();if(a)DOM.insertAfter(a,c);}else if(c){DOM.replace(d,c);}else DOM.remove(d);},_getButtonContent:function(){var b=[];if((this._buttons&&this._buttons.length>0)||this._buttons_message){if(this._buttons_message)b.push($N('div',{className:'dialog_buttons_msg'},this._format(this._buttons_message)));if(this._buttons)for(var e=0;e<this._buttons.length;e++){var a=this._buttons[e];var c=$N('input',{type:'button',name:a.name||'',value:a.label});var d=$N('label',{className:'uiButton uiButtonLarge uiButtonConfirm'},c);if(a.className){a.className.split(/\s+/).each(function(f){CSS.addClass(d,f);});if(CSS.hasClass(d,'inputaux')){CSS.removeClass(d,'inputaux');CSS.removeClass(d,'uiButtonConfirm');}}if(a.icon)DOM.prependContent(d,$N('img',{src:a.icon,className:'img mrs'}));Event.listen(c,'click',this._handleButton.bind(this,a.name));b.push(d);}}return b;},_renderDialog:function(b){if(!this._obj)this._buildDialog();if(this._class_name)CSS.addClass(this._obj,this._class_name);CSS.conditionClass(this._obj,'full_bleed',this._full_bleed);if(typeof b=='string')b=HTML(b).setDeferred(this._immediate_rendering!==true);DOM.setContent(this._content,b);this._showDialog();if(this._auto_focus)Form.focusFirst.bind(this,this._content).defer();var a=Vector2.getElementDimensions(this._content).y+Vector2.getElementPosition(this._content).y;Dialog._bottoms.push(a);this._bottom=a;Dialog._updateMaxBottom();return this;},_buildDialog:function(){this._obj=$N('div',{className:'generic_dialog',tabIndex:'0'});this._obj.setAttribute('role','alertdialog');this._obj.setAttribute('aria-labelledby','title_'+this._uniqueID);this._obj.style.display='none';document.body.appendChild(this._obj);if(!this._popup)this._popup=$N('div',{className:'generic_dialog_popup'});this._popup.style.left=this._popup.style.top='';this._obj.appendChild(this._popup);if(ua.ie()<7&&!this._shim)Bootloader.loadComponents('iframe-shim',function(){this._shim=new IframeShim(this._popup);});this._buildDialogContent();},_showDialog:function(){if(this._modal)if(this._overlay){this._overlay.style.display='';}else this._buildOverlay();if(this._obj&&this._obj.style.display){this._obj.style.visibility='hidden';this._obj.style.display='';this.resetDialogPosition();this._obj.style.visibility='';this._obj.dialog=this;}else this.resetDialogPosition();clearInterval(this.active_hiding);this.active_hiding=setInterval(this._activeResize.bind(this),500);Arbiter.inform('new_layer');var c=Dialog._stack;if(c.length){var a=c[c.length-1];if(a!=this&&(!a._is_stackable||(a._show_loading&&a._loading_was_shown)))a._hide();for(var b=c.length-1;b>=0;b--)if(c[b]==this){c.splice(b,1);}else if(!c[b]._shown_while_stacked)c[b]._hide(true);}c.push(this);return this;},_updateShim:function(){return this._shim&&this._shim.show();},_activeResize:function(){if(this.last_offset_height!=this._content.offsetHeight){this.last_offset_height=this._content.offsetHeight;this._updateShim();}},_buildDialogContent:function(){CSS.addClass(this._obj,'pop_dialog');if(intl_locale_is_rtl())CSS.addClass(this._obj,'pop_dialog_rtl');var a;if(Dialog._useCSSBorders){a='<div class="pop_container_advanced">'+'<div class="pop_content" id="pop_content"></div>'+'</div>';}else a='<div class="pop_container">'+'<div class="pop_verticalslab"></div>'+'<div class="pop_horizontalslab"></div>'+'<div class="pop_topleft"></div>'+'<div class="pop_topright"></div>'+'<div class="pop_bottomright"></div>'+'<div class="pop_bottomleft"></div>'+'<div class="pop_content pop_content_old" id="pop_content"></div>'+'</div>';DOM.setContent(this._popup,HTML(a));this._frame=DOM.find(this._popup,'div.pop_content');this._content=this._frame;},_buildOverlay:function(){this._overlay=$N('div',{id:'generic_dialog_overlay'});if(this._modal_class)CSS.addClass(this._overlay,this._modal_class);if(this._semi_modal){var a=function(b){if(b.getTarget()==this._obj||b.getTarget()==this._overlay)this.hide();}.bind(this);Event.listen(this._obj,'click',a);Event.listen(this._overlay,'click',a);}if(ua.ie()<7)this._overlay.style.height=Vector2.getDocumentDimensions().y+'px';onloadRegister(function(){document.body.appendChild(this._overlay);}.bind(this));},resetDialogPosition:function(){if(!this._popup)return;this._resetDialogObj();this._updateShim();},_resetDialogObj:function(){var a=DOM.find(this._popup,'div.pop_content');var d=Vector2.getScrollPosition().y;var f=20;var g=Vector2.getViewportDimensions().y;var b=Vector2.getElementDimensions(a).y+f;var e=d+this._top+'px';if(this._top+b>g){var c=Math.max(g-b,0);e=((c/2)+d)+'px';}this._popup.style.top=e;},_fadeOut:function(b){if(!this._popup)return;try{animation(this._obj).duration(0).checkpoint().to('opacity',0).hide().duration(250).ondone(this._hide.bind(this,b)).go();}catch(a){this._hide(b);}},_hide:function(d){if(this._obj)this._obj.style.display='none';if(this._overlay)if(d){this._overlay.style.display='none';}else{DOM.remove(this._overlay);this._overlay=null;}this._updateShim();if(this.timeout){clearTimeout(this.timeout);this.timeout=null;}if(this._hidden_objects.length){for(var b=0,c=this._hidden_objects.length;b<c;b++)this._hidden_objects[b].style.visibility='';this._hidden_objects=[];}clearInterval(this.active_hiding);if(this._bottom){var a=Dialog._bottoms;a.splice(a.indexOf(this._bottom),1);Dialog._updateMaxBottom();}if(d)return;this.destroy();},destroy:function(){if(Dialog._stack.length){var b=Dialog._stack;for(var a=b.length-1;a>=0;a--)if(b[a]==this){b.splice(a,1);break;}if(b.length)b[b.length-1]._showDialog();}if(this._obj){DOM.remove(this._obj);this._obj=null;this._shim&&this._shim.hide();this._shim=null;}if(this._close_handler)this._close_handler({return_data:this._return_data});},_handleButton:function(a){if(typeof a=='string')a=Dialog._findButton(this._buttons,a);var b=Dialog.call_or_eval(a,a.handler);if(b===false)return;if(a.name=='cancel'){this.cancel();}else if(Dialog.call_or_eval(this,this._handler,{button:a})!==false)this.hide();},_submitForm:function(d,e,b){var c=this.getFormData();if(b)c[b.name]=b.label;if(this._extra_data)copy_properties(c,this._extra_data);var a=new AsyncRequest().setURI(e).setData(c).setMethod(d).setNectarModuleDataSafe(this._causal_elem).setReadOnly(d=='GET');this.setAsync(a);return false;},_setFromModel:function(c){var a={};copy_properties(a,c);if(a.immediateRendering){this.setImmediateRendering(a.immediateRendering);delete a.immediateRendering;}for(var d in a){if(d=='onloadRegister'){this.onloadRegister(a[d]);continue;}var b=this['set'+d.substr(0,1).toUpperCase()+d.substr(1)];b.apply(this,$A(a[d]));}},_updateBottom:function(){var a=Vector2.getElementDimensions(this._content).y+Vector2.getElementPosition(this._content).y;Dialog._bottoms[Dialog._bottoms.length-1]=a;Dialog._updateMaxBottom();}});
function AsyncRequest(uri){var dispatchResponse=bind(this,function(asyncResponse){try{this.clearStatusIndicator();this._measureSaved&&this._measureSaved();if(this._isPrefetch){this._isPrefetch=false;return;}if(!this.isRelevant()){invokeErrorHandler(1010);return;}if(this.initialHandler(asyncResponse)!==false){clearTimeout(this.timer);asyncResponse.jscc&&invoke_callbacks([asyncResponse.jscc]);if(this.handler)try{var suppress_onload=this.handler(asyncResponse);}catch(exception){asyncResponse.is_last&&this.finallyHandler(asyncResponse);throw exception;}asyncResponse.is_last&&this.finallyHandler(asyncResponse);if(suppress_onload!==AsyncRequest.suppressOnloadToken){var onload=asyncResponse.onload;if(onload)for(var ii=0;ii<onload.length;ii++)try{(new Function(onload[ii])).apply(this);}catch(exception){}if(this.lid&&!asyncResponse.isReplay())Arbiter.inform('tti_ajax',{s:this.lid,d:[this._sendTimeStamp||0,(this._sendTimeStamp&&this._responseTime)?(this._responseTime-this._sendTimeStamp):0]},Arbiter.BEHAVIOR_EVENT);var onafterload=asyncResponse.onafterload;if(onafterload)for(var ii=0;ii<onafterload.length;ii++)try{(new Function(onafterload[ii])).apply(this);}catch(exception){}}var invalidate_cache=asyncResponse.invalidate_cache;if(!this.getOption('suppressCacheInvalidation')&&invalidate_cache&&invalidate_cache.length)Arbiter.inform(Arbiter.PAGECACHE_INVALIDATE,invalidate_cache);}if(asyncResponse.cacheObservation&&typeof(TabConsoleCacheobserver)!='undefined'&&TabConsoleCacheobserver.instance)TabConsoleCacheobserver.getInstance().addAsyncObservation(asyncResponse.cacheObservation);}catch(exception){}});var replayResponses=bind(this,function(){if(is_empty(this._asyncResponses))return;this.setNewSerial();for(var ii=0;ii<this._asyncResponses.length;++ii){var r=this._asyncResponses[ii];invokeResponseHandler(r,true);}});var dispatchErrorResponse=bind(this,function(asyncResponse,isTransport){try{this.clearStatusIndicator();var async_error=asyncResponse.getError();if(this._sendTimeStamp){var _duration=(+new Date())-this._sendTimeStamp;var xfb_ip=this._xFbServer||'-';asyncResponse.logError('async_error',_duration+':'+xfb_ip);}else asyncResponse.logError('async_error');if((!this.isRelevant())||async_error===1010)return;if(async_error==1357008||async_error==1357007||async_error==1442002||async_error==1357001){var is_confirmation=false;if(async_error==1357008||async_error==1357007)is_confirmation=true;var payload=asyncResponse.getPayload();this._displayServerDialog(payload.__dialog,is_confirmation);}else if(this.initialHandler(asyncResponse)!==false){clearTimeout(this.timer);try{if(isTransport){this.transportErrorHandler(asyncResponse);}else this.errorHandler(asyncResponse);}catch(exception){this.finallyHandler(asyncResponse);throw exception;}this.finallyHandler(asyncResponse);}}catch(exception){}});var _interpretTransportResponse=bind(this,function(){if(this.getOption('suppressEvaluation')){var r=new AsyncResponse(this,this.transport);return {asyncResponse:r};}var _sendError=function(p,error_code,str){if(!window.send_error_signal)return;if(this._xFbServer){error_code='1008_'+error_code;}else error_code='1012_'+error_code;send_error_signal('async_xport_resp',error_code+':'+(this._xFbServer||'-')+':'+p.getURI()+':'+str.length+':'+str.substr(0,1600));};var shield="for (;;);";var shieldlen=shield.length;var text=this.transport.responseText;if(text.length<=shieldlen){_sendError(this,'empty',text);return {transportError:'Response too short on async to '+this.getURI()};}var offset=0;while(text.charAt(offset)==" "||text.charAt(offset)=="\n")offset++;offset&&text.substring(offset,offset+shieldlen)==shield;var safeResponse=text.substring(offset+shieldlen);try{var response=eval('('+safeResponse+')');}catch(exception){_sendError(this,'excep',text);return {transportError:'eval() failed on async to '+this.getURI()};}return interpretResponse(response);});var interpretResponse=bind(this,function(response){if(response.redirect)return {redirect:response.redirect};var r=new AsyncResponse(this);if(response.__ar!=1){r.payload=response;}else{copy_properties(r,response);if(response.tplts)if(window.DynaTemplate)DynaTemplate.registerTemplates(response.tplts);}return {asyncResponse:r};});var invokeResponseHandler=bind(this,function(interp,is_replay){if(typeof(interp.redirect)!='undefined'){(function(){this.setURI(interp.redirect).send();}).bind(this).defer();return;}if(this.handler||this.errorHandler||this.transportErrorHandler)if(typeof(interp.asyncResponse)!='undefined'){var r=interp.asyncResponse;r.setReplay(!!is_replay);if(!this.isRelevant()){invokeErrorHandler(1010);return;}if(r.inlinejs)eval_global(r.inlinejs);if(r.lid){this._responseTime=(+new Date());if(window.CavalryLogger)this.cavalry=CavalryLogger.getInstance(r.lid);this.lid=r.lid;}if(r.getError()&&!r.getErrorIsWarning()){var fn=dispatchErrorResponse;}else{var fn=dispatchResponse;if(this._replayable&&!is_replay&&!r.dontReplay){this._asyncResponses=this._asyncResponses||[];this._asyncResponses.push(interp);}}Bootloader.setResourceMap(r.resource_map);if(r.bootloadable)Bootloader.enableBootload(r.bootloadable);fn=fn.shield(null,r);fn=fn.defer.bind(fn);var is_transitional=false;if(this.preBootloadHandler)is_transitional=this.preBootloadHandler(r);r.css=r.css||[];r.js=r.js||[];Bootloader.loadResources(r.css.concat(r.js),fn,is_transitional,this.getURI());}else if(typeof(interp.transportError)!='undefined'){if(this._xFbServer){invokeErrorHandler(1008);}else invokeErrorHandler(1012);}else invokeErrorHandler(1007);});var invokeErrorHandler=bind(this,function(explicitError){try{if(!window.loaded&&!this.getOption('handleErrorAfterUnload'))return;}catch(ex){return;}var r=new AsyncResponse(this);var err;try{err=explicitError||this.transport.status||1004;}catch(ex){err=1005;}if(this._requestAborted)err=1011;try{if(this.responseText=='')err=1002;}catch(ignore){}if(this.transportErrorHandler){var desc,summary;var silent=true;if(false===navigator.onLine){summary=_tx("No Network Connection");desc=_tx("Your browser appears to be offline. Please check your internet connection and try again.");err=1006;}else if(err>=300&&err<=399){summary=_tx("Redirection");desc=_tx("Your access to Facebook was redirected or blocked by a third party at this time, please contact your ISP or reload. ");redir_url=this.transport.getResponseHeader("Location");if(redir_url)goURI(redir_url,true);silent=true;}else{summary=_tx("Oops!");desc=_tx("Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.");}!this.getOption('suppressErrorAlerts');copy_properties(r,{error:err,errorSummary:summary,errorDescription:desc,silentError:silent});dispatchErrorResponse(r,true);}});var handleResponse=function(response){var asyncResponse=this.interpretResponse(response);this.invokeResponseHandler(asyncResponse);};var onStateChange=function(){try{if(this.transport.readyState==4){AsyncRequest._inflightPurge();try{if(typeof(this.transport.getResponseHeader)!='undefined'&&this.transport.getResponseHeader('X-FB-Server'))this._xFbServer=this.transport.getResponseHeader('X-FB-Server');}catch(ex){}if(this.transport.status>=200&&this.transport.status<300){invokeResponseHandler(_interpretTransportResponse());}else if(ua.safari()&&(typeof(this.transport.status)=='undefined')){invokeErrorHandler(1002);}else if(window.Env&&window.Env.retry_ajax_on_network_error&&this.transport.status in {0:1,12029:1,12030:1,12031:1,12152:1}&&this.remainingRetries>0){--this.remainingRetries;delete this.transport;this.send(true);return;}else invokeErrorHandler();if(this.getOption('asynchronous')!==false)delete this.transport;}}catch(exception){try{if(!window.loaded)return;}catch(ex){return;}delete this.transport;if(this.remainingRetries>0){--this.remainingRetries;this.send(true);}else{!this.getOption('suppressErrorAlerts');if(window.send_error_signal)send_error_signal('async_xport_resp','1007:'+(this._xFbServer||'-')+':'+this.getURI()+':'+exception.message);invokeErrorHandler(1007);}}};var onJSONPResponse=function(data,more_chunked_response){var is_first=(this.is_first===undefined);this.is_first=is_first;if(this.transportIframe&&!more_chunked_response)(function(x){document.body.removeChild(x);}).bind(null,this.transportIframe).defer();if(ua.ie()>=9&&window.JSON)data=window.JSON.parse(window.JSON.stringify(data));var r=this.interpretResponse(data);r.asyncResponse.is_first=is_first;r.asyncResponse.is_last=!more_chunked_response;this.invokeResponseHandler(r);return more_chunked_response;};copy_properties(this,{onstatechange:onStateChange,onjsonpresponse:onJSONPResponse,replayResponses:replayResponses,invokeResponseHandler:invokeResponseHandler,interpretResponse:interpretResponse,handleResponse:handleResponse,transport:null,method:'POST',uri:'',timeout:null,timer:null,initialHandler:bagofholding,handler:null,errorHandler:null,transportErrorHandler:null,timeoutHandler:null,finallyHandler:bagofholding,serverDialogCancelHandler:bagofholding,relativeTo:null,statusElement:null,statusClass:'',data:{},context:{},readOnly:false,writeRequiredParams:['post_form_id'],remainingRetries:0,option:{asynchronous:true,suppressCacheInvalidation:false,suppressErrorHandlerWarning:false,suppressEvaluation:false,suppressErrorAlerts:false,retries:0,jsonp:false,bundle:false,useIframeTransport:false,tfbEndpoint:true,handleErrorAfterUnload:false},_replayable:undefined,_replayKey:'',_isPrefetch:false});this.errorHandler=AsyncResponse.defaultErrorHandler;this.transportErrorHandler=bind(this,'errorHandler');if(uri!=undefined)this.setURI(uri);return this;}Arbiter.subscribe("page_transition",function(b,a){AsyncRequest._id_threshold=a.id;});copy_properties(AsyncRequest,{receiveJSONPResponse:function(b,a,c){if(this._JSONPReceivers[b]){if(!this._JSONPReceivers[b](a,c))delete this._JSONPReceivers[b];}else if(window.send_error_signal&&!c){var d=(a.payload&&a.payload.uri)||'';send_error_signal('js_timeout_and_exception','00002:WrongSessionID:error:'+b+':'+d);}},_hasBundledRequest:function(){return AsyncRequest._allBundledRequests.length>0;},stashBundledRequest:function(){var a=AsyncRequest._allBundledRequests;AsyncRequest._allBundledRequests=[];return a;},setBundledRequestProperties:function(b){var c=null;if(b.stashedRequests)AsyncRequest._allBundledRequests=AsyncRequest._allBundledRequests.concat(b.stashedRequests);if(!AsyncRequest._hasBundledRequest()){var a=b.callback;a&&a();}else{copy_properties(AsyncRequest._bundledRequestProperties,b);if(b.start_immediately)c=AsyncRequest._sendBundledRequests();}return c;},_bundleRequest:function(b){if(b.getOption('jsonp')||b.getOption('useIframeTransport')){b.setOption('bundle',false);return false;}else if(!b.uri.isFacebookURI()){b.setOption('bundle',false);return false;}else if(!b.getOption('asynchronous')){b.setOption('bundle',false);return false;}var a=b.uri.getPath();if(!AsyncRequest._bundleTimer)AsyncRequest._bundleTimer=setTimeout(function(){AsyncRequest._sendBundledRequests();},0);AsyncRequest._allBundledRequests.push([a,b]);return true;},_sendBundledRequests:function(){clearTimeout(AsyncRequest._bundleTimer);AsyncRequest._bundleTimer=null;var a=AsyncRequest._allBundledRequests;AsyncRequest._allBundledRequests=[];var e={};copy_properties(e,AsyncRequest._bundledRequestProperties);AsyncRequest._bundledRequestProperties={};if(is_empty(e)&&a.length==1){var g=a[0][1];g.setOption('bundle',false).send();return g;}var d=function(){e.callback&&e.callback();};if(a.length===0){d();return null;}var b=[];for(var c=0;c<a.length;c++)b.push([a[c][0],URI.implodeQuery(a[c][1].data)]);var f={data:b};if(e.extra_data)copy_properties(f,e.extra_data);var g=new AsyncRequest();g.setURI('/ajax/proxy.php').setData(f).setMethod('POST').setInitialHandler(e.onInitialResponse||bagof(true)).setAllowCrossPageTransition(true).setHandler(function(l){var k=l.getPayload();var n=k.responses;if(n.length!=a.length){return;}else for(var i=0;i<a.length;i++){var j=a[i][0];var m=a[i][1];m.id=this.id;if(n[i][0]!=j){m.invokeResponseHandler({transportError:'Wrong response order in bundled request to '+j});continue;}var h=m.interpretResponse(n[i][1]);m.invokeResponseHandler(h);}}).setTransportErrorHandler(function(m){var k=[];var i={transportError:m.errorDescription};for(var h=0;h<a.length;h++){var j=a[h][0];var l=a[h][1];k.push(j);l.id=this.id;l.invokeResponseHandler(i);}}).setFinallyHandler(function(h){d();}).send();return g;},bootstrap:function(c,b,d){var e='GET';var f=true;var a={};if(d||(b&&b.rel=='async-post')){e='POST';f=false;if(c){c=URI(c);a=c.getQueryData();c.setQueryData({});}}var g=Parent.byClass(b,'stat_elem')||b;if(g&&CSS.hasClass(g,'async_saving'))return false;new AsyncRequest(c).setReadOnly(f).setMethod(e).setData(a).setNectarModuleDataSafe(b).setStatusElement(g).setRelativeTo(b).send();return false;},post:function(b,a){new AsyncRequest(b).setReadOnly(false).setMethod('POST').setData(a).send();return false;},clearCache:function(){AsyncRequest._reqsCache={};},getLastId:function(){return AsyncRequest._last_id;},_JSONPReceivers:{},_allBundledRequests:[],_bundledRequestProperties:{},_bundleTimer:null,suppressOnloadToken:{},REPLAYABLE_AJAX:'ajax/replayable',_last_id:2,_id_threshold:2,_reqsCache:{},_inflight:[],_inflightAdd:bagofholding,_inflightPurge:bagofholding,_inflightEnable:function(){if(ua.ie()){copy_properties(AsyncRequest,{_inflightAdd:function(a){this._inflight.push(a);},_inflightPurge:function(){AsyncRequest._inflight=AsyncRequest._inflight.filter(function(a){return a.transport&&a.transport.readyState<4;});}});onunloadRegister(function(){AsyncRequest._inflight.each(function(a){if(a.transport&&a.transport.readyState<4){a.transport.abort();delete a.transport;}});});}}});copy_properties(AsyncRequest.prototype,{setMethod:function(a){this.method=a.toString().toUpperCase();return this;},getMethod:function(){return this.method;},setData:function(a){this.data=a;return this;},getData:function(){return this.data;},setContextData:function(b,c,a){a=a===undefined?true:a;if(a)this.context['_log_'+b]=c;return this;},setURI:function(a){var b=URI(a);if(this.getOption('useIframeTransport')&&!b.isFacebookURI())return this;if(!this.getOption('jsonp')&&!this.getOption('useIframeTransport')&&!b.isSameOrigin())return this;if(!a||b.toString()===''){if(window.send_error_signal&&window.get_error_stack){send_error_signal('async_error','1013:-:0:-:'+window.location.href);send_error_signal('async_xport_stack','1013:'+window.location.href+'::'+get_error_stack());}return this;}this.uri=b;return this;},getURI:function(){return this.uri.toString();},setInitialHandler:function(a){this.initialHandler=a;return this;},setHandler:function(a){if(!(typeof(a)!='function'))this.handler=a;return this;},getHandler:function(){return this.handler;},setErrorHandler:function(a){if(!(typeof(a)!='function'))this.errorHandler=a;return this;},setTransportErrorHandler:function(a){this.transportErrorHandler=a;return this;},getErrorHandler:function(){return this.errorHandler;},getTransportErrorHandler:function(){return this.transportErrorHandler;},setTimeoutHandler:function(b,a){if(!(typeof(a)!='function')){this.timeout=b;this.timeoutHandler=a;}return this;},resetTimeout:function(a){if(!(this.timeoutHandler===null))if(a===null){this.timeout=null;clearTimeout(this.timer);this.timer=null;}else{this.timeout=a;clearTimeout(this.timer);this.timer=this._handleTimeout.bind(this).defer(this.timeout);}return this;},_handleTimeout:function(){this.abandon();this.timeoutHandler(this);},setNewSerial:function(){this.id=++AsyncRequest._last_id;return this;},setFinallyHandler:function(a){this.finallyHandler=a;return this;},setServerDialogCancelHandler:function(a){this.serverDialogCancelHandler=a;return this;},setPreBootloadHandler:function(a){this.preBootloadHandler=a;return this;},setReadOnly:function(a){if(!(typeof(a)!='boolean'))this.readOnly=a;return this;},setFBMLForm:function(){this.writeRequiredParams=["fb_sig"];return this;},getReadOnly:function(){return this.readOnly;},setRelativeTo:function(a){this.relativeTo=a;return this;},getRelativeTo:function(){return this.relativeTo;},setStatusClass:function(a){this.statusClass=a;return this;},setStatusElement:function(a){this.statusElement=a;return this;},getStatusElement:function(){return ge(this.statusElement);},isRelevant:function(){if(this._allowCrossPageTransition)return true;if(!this.id)return true;return this.id>AsyncRequest._id_threshold;},clearStatusIndicator:function(){var a=this.getStatusElement();if(a){CSS.removeClass(a,'async_saving');CSS.removeClass(a,this.statusClass);}},addStatusIndicator:function(){var a=this.getStatusElement();if(a){CSS.addClass(a,'async_saving');CSS.addClass(a,this.statusClass);}},specifiesWriteRequiredParams:function(){return this.writeRequiredParams.every(function(a){this.data[a]=this.data[a]||Env[a]||(ge(a)||{}).value;if(this.data[a]!==undefined)return true;return false;},this);},setReplayable:function(b,a){this._replayable=b;this._replayKey=a||'';return this;},setOption:function(a,b){if(typeof(this.option[a])!='undefined')this.option[a]=b;return this;},getOption:function(a){typeof(this.option[a])=='undefined';return this.option[a];},abort:function(){if(this.transport){var a=this.getTransportErrorHandler();this.setOption('suppressErrorAlerts',true);this.setTransportErrorHandler(bagofholding);this._requestAborted=1;this.transport.abort();this.setTransportErrorHandler(a);}},abandon:function(){clearTimeout(this.timer);this.setOption('suppressErrorAlerts',true).setHandler(bagofholding).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding);if(this.transport){this._requestAborted=1;this.transport.abort();}},setNectarActionData:function(a){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._ia=1;if(a){if(this.data.nctr._as===undefined)this.data.nctr._as={};copy_properties(this.data.nctr._as,a);}return this;},setNectarData:function(a){if(a){if(this.data.nctr===undefined)this.data.nctr={};copy_properties(this.data.nctr,a);}return this;},setNectarModuleDataSafe:function(a){if(this.setNectarModuleData)this.setNectarModuleData(a);return this;},setNectarImpressionIdSafe:function(){if(this.setNectarImpressionId)this.setNectarImpressionId();return this;},setPrefetch:function(a){this._isPrefetch=a;this.setAllowCrossPageTransition(true);return this;},setAllowCrossPageTransition:function(a){this._allowCrossPageTransition=!!a;return this;},send:function(c){if(this._checkCache&&this._checkCache())return true;c=c||false;if(!this.uri)return false;!this.errorHandler&&!this.getOption('suppressErrorHandlerWarning');if(this.getOption('jsonp')&&this.method!='GET')this.setMethod('GET');if(this.getOption('useIframeTransport')&&this.method!='GET')this.setMethod('GET');this.timeoutHandler!==null&&(this.getOption('jsonp')||this.getOption('useIframeTransport'));if(!this.getReadOnly()){if(!this.specifiesWriteRequiredParams())return false;if(this.method!='POST')return false;}if(this.method=='POST'&&this.getOption('tfbEndpoint')){this.data.fb_dtsg=Env.fb_dtsg;this.data.lsd=getCookie('lsd');}this._replayable=(!this.getReadOnly()&&this._replayable!==false)||this._replayable;if(this._replayable)Arbiter.inform(AsyncRequest.REPLAYABLE_AJAX,this);if(!is_empty(this.context)&&this.getOption('tfbEndpoint')){copy_properties(this.data,this.context);this.data.ajax_log=1;}if(!this.getReadOnly()&&this.getOption('tfbEndpoint')&&this.method=='POST'&&this.data.post_form_id_source===undefined)this.data.post_form_id_source='AsyncRequest';if(this.getOption('bundle')&&AsyncRequest._bundleRequest(this))return true;this.setNewSerial();if(this.getOption('tfbEndpoint'))this.uri.addQueryData({__a:1});this.finallyHandler=async_callback(this.finallyHandler,'final');var h,d;if(this.method=='GET'){h=this.uri.addQueryData(this.data).toString();d='';}else{h=this.uri.toString();d=URI.implodeQuery(this.data);}if(this.getOption('jsonp')||this.getOption('useIframeTransport')){h=this.uri.addQueryData({__a:this.id}).toString();AsyncRequest._JSONPReceivers[this.id]=async_callback(bind(this,'onjsonpresponse'),'json');if(this.getOption('jsonp')){(function(){document.body.appendChild($N('script',{src:h,type:"text/javascript"}));}).bind(this).defer();}else{var e={position:'absolute',top:'-1000px',left:'-1000px',width:'80px',height:'80px'};this.transportIframe=$N('iframe',{src:"javascript:''",style:e});document.body.appendChild(this.transportIframe);this.transportIframe.src=h;}return true;}if(this.transport)return false;var g=null;try{g=new XMLHttpRequest();}catch(b){}if(!g)try{g=new ActiveXObject("Msxml2.XMLHTTP");}catch(b){}if(!g)try{g=new ActiveXObject("Microsoft.XMLHTTP");}catch(b){}if(!g)return false;g.onreadystatechange=async_callback(bind(this,'onstatechange'),'xhr');if(!c)this.remainingRetries=this.getOption('retries');if(window.send_error_signal||window.ArbiterMonitor)this._sendTimeStamp=this._sendTimeStamp||(+new Date());this.transport=g;try{this.transport.open(this.method,h,this.getOption('asynchronous'));}catch(a){return false;}var f=env_get('svn_rev');if(f)this.transport.setRequestHeader('X-SVN-Rev',String(f));if(this.method=='POST')this.transport.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this.addStatusIndicator();this.transport.send(d);if(this.timeout!==null)this.resetTimeout(this.timeout);AsyncRequest._inflightAdd(this);return true;},_displayServerDialog:function(c,b){var a=new Dialog(c);if(b)a.setHandler(this._displayConfirmationHandler.bind(this,a));a.setCancelHandler(function(){this.serverDialogCancelHandler.apply(this,arguments);this.finallyHandler.apply(this,arguments);}.bind(this)).setCloseHandler(this.finallyHandler.bind(this)).show();},_displayConfirmationHandler:function(a){this.data.confirmed=1;copy_properties(this.data,a.getFormData());this.send();}});function AsyncResponse(b,a){copy_properties(this,{error:0,errorSummary:null,errorDescription:null,onload:null,replay:false,payload:a||null,request:b||null,silentError:false,is_last:true});return this;}copy_properties(AsyncResponse,{defaultErrorHandler:function(b){try{if(!b.silentError){AsyncResponse.verboseErrorHandler(b);}else b.logErrorByGroup('silent',10);}catch(a){alert(b);}},verboseErrorHandler:function(b){try{var summary=b.getErrorSummary();var desc=b.getErrorDescription();b.logErrorByGroup('popup',10);if(b.silentError&&desc=='')desc=_tx("Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.");ErrorDialog.show(summary,desc);}catch(a){alert(b);}}});copy_properties(AsyncResponse.prototype,{getRequest:function(){return this.request;},getPayload:function(){return this.payload;},getError:function(){return this.error;},getErrorSummary:function(){return this.errorSummary;},setErrorSummary:function(a){a=(a===undefined?null:a);this.errorSummary=a;return this;},getErrorDescription:function(){return this.errorDescription;},getErrorIsWarning:function(){return this.errorIsWarning;},setReplay:function(a){a=(a===undefined?true:a);this.replay=!!a;return this;},isReplay:function(){return this.replay;},logError:function(a,c){if(window.send_error_signal){c=(c===undefined?'':(':'+c));var d=this.request.getURI();var b=this.error+':'+(env_get('vip')||'-')+c+':'+(d||'-');if(d&&d.indexOf('scribe_endpoint.php')!=-1)a='async_error_double';send_error_signal(a,b);}},logErrorByGroup:function(b,a){if(Math.floor(Math.random()*a)==0)if(this.error==1357010||this.error<15000){this.logError('async_error_oops_'+b);}else this.logError('async_error_logic_'+b);}});
ConnectLogin={init:function(a){this.appID=a.appID;this.oneClick=a.oneClick;XD.init(a);},login:function(a,c,b){if(this.oneClick&&!c){this._oneClick(a);}else this._openPopup(a,c,b);},logout:function(){XD.send({type:'logout'});},_oneClick:function(a){new AsyncRequest().setURI('/ajax/api/tos.php').setData({app_id:this.appID,grant_perm:1}).setHandler(function(b){ConnectLogin._refreshLoginStatus();a&&a();}).send();},_openPopup:function(c,e,d){d=d||{};var b=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();if(ConnectLogin.appID)ConnectLogin._refreshLoginStatus();c&&c();}),a=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();}),g=new URI('/login.php');g.setQueryData({api_key:this.appID,next:b,channel_url:a,cancel_url:a,req_perms:e,v:'1.0',fbconnect:1,display:'popup'});g.addQueryData(d);var f=this._getSize(d);this._popup=PopupResizer.open(g.toString(),f.height,f.width);},_closePopup:function(){if(this._popup){this._popup.close();this._popup=null;}},_refreshLoginStatus:function(){XD.send({type:'refreshLoginStatus'});},_getSize:function(a){if(a.social_plugin=='registration'){return {width:640,height:370};}else return {width:610,height:280};}};
add_properties('Input',{getSelection:function(b){if(!document.selection)return {start:b.selectionStart,end:b.selectionEnd};var d=document.selection.createRange();if(d.parentElement()!==b)return {start:0,end:0};var c=b.value.length;if(b.tagName=='INPUT'){return {start:-d.moveStart('character',-c),end:-d.moveEnd('character',-c)};}else{var e=d.duplicate();e.moveToElementText(b);e.setEndPoint('StartToEnd',d);var a=c-e.text.length;e.setEndPoint('StartToStart',d);return {start:c-e.text.length,end:a};}},setSelection:function(d,f,c){if(typeof c=='undefined')c=f;if(document.selection){if(d.tagName=='TEXTAREA'){var a=(d.value.slice(0,f).match(/\r/g)||[]).length;var b=(d.value.slice(f,c).match(/\r/g)||[]).length;f-=a;c-=a+b;}var e=d.createTextRange();e.collapse(true);e.moveStart('character',f);e.moveEnd('character',c-f);e.select();}else{d.selectionStart=f;d.selectionEnd=Math.min(c,d.value.length);Input.focus(d);}}});
function IntlTranslationBase(e,j,k,i,c,h,f,g){this.isRightToLeft=e;this.textarea=j;this.native_string=f;this.native_type=g;this.previewDiv=i;this.previewParagraph=null;this.segmentPrev=ge('intl_segment_prev:'+h);if(this.segmentPrev){this.segmentNext=ge('intl_segment_next:'+h);Event.listen(this.segmentPrev,'click',this.prevSegment.bind(this));Event.listen(this.segmentNext,'click',this.nextSegment.bind(this));this.segmentInsert=ge('intl_segment_insert:'+h);Event.listen(this.segmentInsert,'click',this.insertSegment.bind(this));}this.segmentNumber=0;this.segmentCount=0;this.segmentsInserted=[];this.child_markup=[];if(i){this.child_markup=DOM.scry(i,'p');this.previewParagraph=this.child_markup[0];}this.anchors=[];this.glossaryAnchors=[];this.anchor_states=[];this.tokens=[];this.glossary=[];if(k){var a=k.getElementsByTagName('a');for(var d=0;d<a.length;d++){this.anchors.push(a[d]);Event.listen(a[d],'click',this.insertToken.bind(a[d],this));this.anchor_states.push(false);}}if(c){var a=c.getElementsByTagName('a');for(var d=0;d<a.length;d++){this.glossaryAnchors.push(a[d]);Event.listen(a[d],'click',this.insertGlossaryTerm.bind(a[d],this));}}if(j){Event.listen(j,'keyup',this.refreshTokens.bind(this));if(i){var b=Event.listen(j,'keyup',this.refreshPreview.bind(this));DataStore.set(j,'keyupEventRef',b);}if(e)Event.listen(j,'keydown',this.checkRtlBackspace.bind(this));}}copy_properties(IntlTranslationBase.prototype,{setTranslationText:function(a){this.textarea.value=a;this.refreshTokens();this.refreshPreview();if(!this.textarea._hascontrol){this.textarea._hascontrol=true;new TextAreaControl(this.textarea).setAutogrow(true);}},insertToken:function(e){if(e.textarea){var a=e._getAnchorIndex(this),c=e.textarea,b=Input.getSelection(e.textarea).end,d=e.tokens[a];if(e.isRightToLeft)d='\u200e'+d.replace(/ /g,'\u00a0').replace(/-/g,'\u2011')+'\u200e\u200f';c.value=c.value.substring(0,b)+d+c.value.substring(b);c.focus();b+=d.length;Input.setSelection(c,b,b);e.anchor_states[a]=true;hide(this);e.refreshPreview();}return false;},insertGlossaryTerm:function(e){if(e.textarea){var a=e._getGlossaryAnchorIndex(this),d=e.textarea,b=Input.getSelection(e.textarea).end,c=e.glossary[a];if(e.isRightToLeft)c='\u200e'+c.replace(/ /g,'\u00a0').replace(/-/g,'\u2011')+'\u200e\u200f';d.value=d.value.substring(0,b)+c+d.value.substring(b);d.focus();b+=c.length;Input.setSelection(d,b,b);e.refreshPreview();}return false;},loadSegment:function(a){if(this.segmentCount==0){var b=true;for(this.segmentCount=1;b;this.segmentCount+=1){b=ge('intl_segment_text:'+this.segmentCount);this.segmentsInserted.push(false);if(b){hide(b);}else break;}}else{if(a>=this.segmentCount||a<0)return false;hide($('intl_segment_text:'+this.segmentNumber));}this.segmentNumber=a;show($('intl_segment_text:'+this.segmentNumber));if(this.segmentNumber>0){CSS.removeClass(this.segmentPrev,'intl-disabled');}else CSS.addClass(this.segmentPrev,'intl-disabled');if(this.segmentNumber<this.segmentCount-1){CSS.removeClass(this.segmentNext,'intl-disabled');}else CSS.addClass(this.segmentNext,'intl-disabled');if(this.canInsert()){CSS.removeClass(this.segmentInsert,'intl-disabled');}else CSS.addClass(this.segmentInsert,'intl-disabled');return false;},prevSegment:function(){return this.loadSegment(this.segmentNumber-1);},nextSegment:function(){return this.loadSegment(this.segmentNumber+1);},canInsert:function(){var a=ge('intl_segment_text:'+this.segmentNumber);return (a&&this.segmentsInserted[this.segmentNumber]==false&&!CSS.hasClass(a.childNodes[0],'intl-translatable')&&!CSS.hasClass(a.childNodes[0],'intl-approvable'));},insertSegment:function(){if(this.canInsert()&&(this.textarea)){var a=ge('intl_segment_text:'+this.segmentNumber);var b=$('intl_segment_text:'+this.segmentNumber).innerHTML;var c=a.replace(/(<([^>]+)>)/gi,'');var d=this.textarea.value;if(intl_ends_in_punct(d))d+=' ';d+=c;this.setTranslationText(d);this.segmentsInserted[this.segmentNumber]=true;CSS.addClass(this.segmentInsert,'intl-disabled');}},refreshSegment:function(){if(this.segmentPrev)if(!this.canInsert()){CSS.addClass(this.segmentInsert,'intl-disabled');}else CSS.removeClass(this.segmentInsert,'intl-disabled');},_getAnchorIndex:function(a){for(var b=0;b<this.anchors.length;b++)if(this.anchors[b]==a)return b;return -1;},_getGlossaryAnchorIndex:function(a){for(var b=0;b<this.glossaryAnchors.length;b++)if(this.glossaryAnchors[b]==a)return b;return -1;},checkRtlBackspace:function(a){var b=Event.getKeyCode(a);var e=true;if(this.isRightToLeft&&b==8){var d=Input.getSelection(this.textarea);if(d.start==d.end&&d.end>1){var c={'\u200e':true,'\u200f':true};var f=d.end-1;var g=this.textarea.value;while(f>0&&(g.charAt(f) in c))f--;this.textarea.value=g.substr(0,f)+g.substr(d.end);Input.setSelection(this.textarea,f,f);$E(a).prevent();}}return true;},cleanseToken:function(a){return a.replace(/\u00a0/g,' ').replace(/\u2011/g,'-').replace(/\u200e/g,'').replace(/\u200f/g,'');},uncleanseToken:function(a){if(this.isRightToLeft)return '\u200e'+a.replace(/ /g,'\u00a0').replace(/-/g,'\u2011')+'\u200e\u200f';return a;},refreshPreview:function(){if(this.previewDiv){(this.textarea.value.length==0?hide:show)(this.previewDiv);var d=this.textarea.value;for(var a=0;a<this.anchors.length;a++)if(this.anchor_states[a]){var c=/\{=([^}]+)\}/.exec(this.tokens[a]);if(c&&c.length>1){var b=this.child_markup[a+1].innerHTML;d=d.replace(this.uncleanseToken(this.tokens[a]),b);}}this.previewParagraph.innerHTML=d;}},activeTokensRegex:function(){return (/\{[^{}]+\}/g);},refreshTokens:function(){if(this.textarea){var a=this.activeTokensRegex(),j=null,m={};for(var d=0;d<this.tokens.length;d++)m[this.tokens[d]]=false;while(j=a.exec(this.textarea.value)){var l=this.cleanseToken(j[0]);var k=l.split(' # ',2);if(k.length>1)k[0]+="}";m[k[0]]=true;}for(var d=0;d<this.anchors.length;d++)if(m[this.tokens[d]]!=this.anchor_states[d]){this.anchor_states[d]=!this.anchor_states[d];(this.anchor_states[d]?hide:show)(this.anchors[d]);}if(this.isRightToLeft&&this.textarea.value.length>0){var f='';var h=Input.getSelection(this.textarea).end;var c=this.textarea.value.substr(0,h);var b=this.textarea.value.substr(h);var i=function(n){return n.replace(/\}(?!\u200e\u200f)/g,'}\u200e\u200f').replace(/(?!\u200e)\{/g,'\u200e{');};c=i(c);var f=c+i(b);var e=c.length;if(f.match(/\{[^}]*[- ]/))do{var g=f;f=f.replace(/(\{[^}]*) /g,'$1\u00a0').replace(/(\{[^}]*)-/g,'$1\u2011');}while(g!=f);if(f!=this.textarea.value){this.textarea.value=f;Input.setSelection(this.textarea,e,e);}}}return true;}});function intlXdAsync(d,a,c,b){var e=new AsyncRequest().setURI(d).setData(a).setHandler(b).setMethod(c);if(c=='GET')e.setReadOnly(true);e.send();}function intl_is_facebook_app_id(a){if(a==1)return true;return false;}
function ContextualDialog(b){var a=new Dialog();copy_properties(a,ContextualDialog.prototype);a._setFromModel(b);return a;}ContextualDialog.prototype={setContext:function(a){this._context=a;this._dirty();return this;},_buildDialogContent:function(){Bootloader.loadComponents('contextual-dialog-css',function(){CSS.addClass(this._obj,'contextual_dialog');this._content=this._frame=$N('div',{className:'contextual_dialog_content'});this._arrow=$N('div',{className:'arrow'});DOM.setContent(this._popup,[this._content,this._arrow]);}.bind(this));},_resetDialogObj:function(){if(!this._context)return;var g=Vector2.getElementPosition(this._context);var k=this._context.offsetWidth,h=this._context.offsetHeight;var l=g.x,m=g.y+h;var i=Vector2.getViewportDimensions().x;var j=Vector2.getScrollPosition().x;var e=Vector2.getDocumentDimensions().x;var d=Vector2.getElementDimensions(this._popup).x;var f=0;var c;if(k<64){c=l+k/2;}else c=l+32;if(e>0&&e<d){f=-l;}else{if(i>0&&l+d>j+i){f=(j+i-d)-l;if(l+f<j)f=j-l;}if(e>0&&l+d>e)f=(e-d)-l;}l+=f;if(c-l<32){l=c-32;if(l<0)l=0;}var b=Vector2.getElementDimensions(this._arrow).x;var a=c-l-b/2;if(a<0)a=0;if(a>d-32)a=d-32;CSS.setStyle(this._arrow,'marginLeft',a+'px');new Vector2(l,m,'document').setElementPosition(this._popup);},_renderDialog:function(a){if(window!=top)this._auto_focus=false;Dialog.prototype._renderDialog.call(this,a);}};
function BorderlessDialog(a){this._dialog=new Dialog(a);this._dialog._auto_focus=false;this._dialog._buildDialogContent=BorderlessDialog._buildDialogContent;this._dialog._resetDialogObj=BorderlessDialog._resetDialogObj;}BorderlessDialog.prototype={setContext:function(a){this._context=a;this._dialog._dirty();return this;},getDialog:function(){return this._dialog;}};copy_properties(BorderlessDialog,{_buildDialogContent:function(){CSS.addClass(this._obj,'borderless_dialog');DOM.setContent(this._popup,HTML('<div class="borderless_dialog_content"></div>'));this._content=this._frame=DOM.find(this._popup,'div.borderless_dialog_content');},_resetDialogObj:function(){if(!this._context)return;var c=Vector2.getElementPosition(this._context);var b=document.body.offsetWidth;var a=(b-this._popup.offsetWidth)/2;var d;if(c.x<b/2){d=Math.min(a,c.x+this._context.offsetWidth);}else d=Math.max(a,c.x-this._popup.offsetWidth);d=d||0;new Vector2(d,c.y+this._context.offsetHeight,'document').setElementPosition(this._popup);}});
function RegisterShortLongClick(b,a,d,c){this.multi_approve_start_time=0;this.multi_approve_timer=false;this.multi_approve_click_hold_duration=a;this.submit_short_click=d;this.submit_long_click=c;Event.listen(b,'click',bind(this,this.perform_onclick));Event.listen(b,'mousedown',bind(this,this.multi_approve_start_timer));}RegisterShortLongClick.prototype.perform_onclick=function(){if(this.multi_approve_timer){cur_time=new Date().getTime();duration=cur_time-this.multi_approve_start_time;if(duration<this.multi_approve_click_hold_duration){window.clearTimeout(this.multi_approve_timer);this.multi_approve_timer=false;this.submit_short_click();}}else this.submit_short_click();};RegisterShortLongClick.prototype.multi_approve_start_timer=function(){this.multi_approve_start_time=new Date().getTime();this.multi_approve_timer=window.setTimeout(this.submit_long_click,this.multi_approve_click_hold_duration);};function do_multi_locale_approve(c,a,b,f,d,g){var e=function(){if(g!=null)g();_multi_locale_approve(c,a,b,f,d);};_show_multi_locale_approve(c,a,b,f,e);}function _show_multi_locale_approve(d,a,c,h,f){var g=350;if(c.length==1){if(trim(h[0])=='')return;g=700;}var e=function(i){var l=_tx("Do you want to approve this translation to the following related locale(s) too?");var k=i.getPayload();var j=new Dialog({contentWidth:g});j.setTitle(l).setBody(k.html).setButtons([Dialog.SAVE,Dialog.CANCEL]).setHandler(f).show();};var b=new AsyncRequest();b.setURI('/ajax/intl/show_multi_locale_approve.php').setData({oid:a,aloc:d,hashes:c,trs:h}).setPreBootloadHandler(bind(this,e)).setMethod('GET').setReadOnly(true).send();}function _multi_locale_approve(h,a,f,l,i){var e=$('multi_locale_approve_form');var c=DOM.scry(e,'.family_locale');var d=[];for(var g=0;g<c.length;g++)if(!c[g].disabled&&c[g].checked)d.push(c[g].value);var j=true;var k=ge('overwrite');if(k)j=k.checked;var b=new AsyncRequest();b.setURI('/ajax/intl/do_translate_approve.php').setData({trs:l,hashes:f,aloc:h,app_id:a,family_locales:d,overwrite:j}).setHandler(bind(this,i)).send();}
function intl_translation_init(){Event.listen(document.body,'mousedown',intl_translation_onmousedown);}function intl_get_translatable_parent(a){while(a.parentNode){if(CSS.hasClass(a,'intl-translatable')||CSS.hasClass(a,'intl-authored')||CSS.hasClass(a,'intl-contributed')||CSS.hasClass(a,'intl-translated')||CSS.hasClass(a,'intl-approved')||CSS.hasClass(a,'intl-approvable')||CSS.hasClass(a,'intl-autoapproved')||CSS.hasClass(a,'intl-iapproved')||CSS.hasClass(a,'intl-complained')||CSS.hasClass(a,'intl-complainable')||CSS.hasClass(a,'intl-unvotable')||CSS.hasClass(a,'intl-votable'))return a;a=a.parentNode;}return null;}function intl_get_walkthrough_parent(a){while(a.parentNode){if(CSS.hasClass(a,'translations_walkthrough'))return a;a=a.parentNode;}return null;}function intl_translation_onmousedown_real(f){if(!f)return;var b=null,d=null,c=null;var a=f.getAttribute('id').replace(/__/g,':').split(':');d=f.className;b=a[1];c=a[2];app=a[4];tr_id=a[5];var e={text:f.getAttribute('native_text'),suffix:f.getAttribute('native_suffix')};var h=intl_get_walkthrough_parent(f);var g=null;if(h)if(CSS.hasClass(h,'voting_walkthrough'))g='voting_walkthrough';intl_show_dialog(f,d,b,c,app,tr_id,true,null,e,g);return;}function intl_translation_onmousedown(a){var b=$E(a).getTarget();b=intl_get_translatable_parent(b);if(!intl_is_left_click(a)&&b){b.oncontextmenu=function(){return false;};intl_translation_onmousedown_real(b);}}function intl_is_left_click(a){if(a.which==null){if(a.button<2&&!a.ctrlKey)return true;}else if(a.which<2&&!a.ctrlKey)return true;return false;}function intl_show_dialog(e,b,h,j,a,m,i,c,k,n){var g='';var d=false;var f;if(c){f=new BorderlessDialog().setContext(e).getDialog();}else f=new ContextualDialog().setContext(e);if(b=='intl-votable'){f.setClassName('intl_vmode_dialog').setStackable(true);}else f.setClassName('intl_translation_dialog');var l=function(o){var p=o.getPayload();f.setImmediateRendering(true).setBody(p.html).show();if(b!='intl-votable'&&ge('intl_ajax:'+p.native_id)){window.translation_dialog=new intl_translation_dialog(p['native'],p.tr_id,p.tokens,p.glossary_words,p.warning_rules,p.is_rtl,p.native_id,p.native_type);if(i)window.intl_inline_translation_dialog=f;}if(c){var r=ge('translation_background');var q=function(s){this.style.height=s.scrollHeight+'px';this.style.minHeight=s.scrollHeight+'px';};window.setInterval(bind(r,q,ge('intl-dialog-content-box')),100);}};intlXdAsync('/ajax/intl/translation_dialog.php',{c:b,h:h,l:j,a:a,t:m,cancel_url:c,native_text:k?k.text:null,native_suffix:k?k.suffix:null,walkthrough_info:n},'GET',l);}function intl_show_variation_help(d,c,a){if(ge(d+':'+c).style.display=='none'){show(ge(d+':'+c));}else hide(ge(d+':'+c));for(var b=0;b<a.length;b++)if(d!=a[b])hide(ge(a[b]+':'+c));}function intl_show_highlight_schemes(){show(ge('highlight_schemes'));}function intl_hide_highlight_schemes(){hide(ge('highlight_schemes'));}function intl_set_sortby(b){var d=b.options[b.selectedIndex].value;var a=new String(document.location);a=a.replace(/&recent/g,"");a=a.replace(/&disputed/g,"");a=a.replace(/&popular/g,"");var c=a.split('&p=');if(c.length==2){goURI(c[0]+'&'+d+'&p='+c[1]);}else goURI(a+'&'+d);}function intl_set_app(c){var b=c.options[c.selectedIndex].value;URI.getRequestURI().addQueryData({app:b}).go();var a=document.getElementById('app_id_hidden_field');if(a)a.value=b;}function intl_quick_vote(b,c,d,e,a){intl_do_vote(b,c,d,e,a,'');intl_update_translations(b,c,a,d);return false;}function intl_vote_in_vote_mode(c,d,e,f,a){var b=Dialog.getCurrent();if(b)b.hide();intl_quick_vote(c,d,e,f,a);return false;}function intl_vote_mode_see_all(f,c,d,a,g){var b=Dialog.getCurrent();if(b){var e=b._context;intl_show_dialog(e,'intl-translatable',c,d,app,g,true);b.hide();}}function intl_do_vote(native_hash,locale,translation_id,vote,app_id,tr_ids){hide(ge('total_'+native_hash+'_'+translation_id));show(ge('voting_'+native_hash+'_'+translation_id));intl_update_vote_controls(native_hash,translation_id,vote);var do_vote=function(asyncResponse){var result=asyncResponse.getPayload();var native_hash=result.native_hash;var translation_id=result.translation_id;hide(ge('voting_'+native_hash+'_'+translation_id));if(result.vote==1&&tr_ids){var ids=eval(tr_ids);if(ids.length>1)for(var i=0;i<ids.length;i++)if(ge('voteup:'+native_hash+':'+ids[i]+':app_bulk')){var c_name=$('voteup:'+native_hash+':'+ids[i]+':app_bulk').className;if(c_name=='upselect'&&ids[i]!=translation_id)CSS.setClass($('voteup:'+native_hash+':'+ids[i]+':app_bulk'),'upover');}}};intlXdAsync('/ajax/intl/do_vote.php',{hash:native_hash,vote:vote,aloc:locale,translation_id:translation_id,app_id:app_id},'POST',do_vote);}function intl_delete_translation(e,d,b,a){var c=new AsyncRequest();c.setURI('/ajax/intl/delete_translations.php').setData({tr_ids:[d],aloc:a,app_id:b,translation:e,non_admin_mode:1}).setMethod('POST').send();}function intl_translation_dialog(e,i,h,a,g,c,d,f){this.parent.construct(this,c,ge('intl_translation:'+d),ge('intl_dialog_tokens:'+d),ge('intl_preview:'+d),ge('glossary'),d,e,f);this.form=ge('intl_ajax:'+d);if(this.textarea)Event.listen(this.textarea,'keyup',this.check_special_input.bind(this));this.shown_tr_id=i;this.tokens=h;this.glossary=a;this.rules=g;this.approved_trs=document.getElementsByName('approved_trs');for(var b=0;b<this.approved_trs.length;b++)Event.listen(this.approved_trs[b],'click',this.handle_approver_checkbox.bind(this,this.approved_trs[b]));if(this.form.intl_submit&&this.form.approved_tr_id){this.multi_approve=new RegisterShortLongClick(this.form.intl_submit,500,this.submit_click.bind(this),this.approve_submit_long_click.bind(this));}else if(this.form.intl_submit)this.form.intl_submit.onclick=this.submit_click.bind(this);if(this.form.copy_text)this.form.copy_text.onclick=this.setTranslationText.bind(this,e);if(this.form.intl_unfinalize)this.form.intl_unfinalize.onclick=this.submit_unfinalize.bind(this);if(this.form.intl_delete)this.form.intl_delete.onclick=this.submit_delete.bind(this);this.refreshTokens();this.refreshPreview();if(this.segmentPrev)this.loadSegment(0);}intl_translation_dialog.extend('IntlTranslationBase');intl_translation_dialog.prototype.check_special_input=function(a){var b=Event.getKeyCode(a);if(b==27)Dialog.getCurrent()&&Dialog.getCurrent().hide();};intl_translation_dialog.prototype.check_tokens=function(){for(var a=0;a<this.anchor_states.length;a++)if(!this.anchor_states[a])return false;return true;};intl_translation_dialog.prototype.check_additional_tokens=function(b,e){var d=/{.*?}/g;var f=e.match(d);if(!f)f=[];var c=b.match(d);if(!c)c=[];for(var a=0;a<f.length;a++)if(!this.in_array(this.cleanseToken(f[a]),c))return false;return true;};intl_translation_dialog.prototype.in_array=function(c,a){for(var b=0;b<a.length;b++)if(a[b]==c)return true;return false;};intl_translation_dialog.prototype.rule_markup=function(a,f){var e=/<\/?[a-zA-Z][^>]*>/g;var i=f.toLowerCase().match(e);var g=i?i.sort():[];var d=a.toLowerCase().match(e);var b=d?d.sort():[];var h=g.join(';');var c=b.join(';');if(h!=c)return _tx("HTML markup mismatch. The HTML markup you entered does not match the original markup.");};function intl_explode_inflection(e){var c=window.intl_locale_inflections;var b=[];if(c)for(var d in c){var a=c[d];if(a[a.length-1]==='+'){b[b.length]=intl_phonological_rules(a+e);}else if(a[0]==='+')b[b.length]=intl_phonological_rules(e+a);}return b;}intl_translation_dialog.prototype.rule_canon=function(d,e){var f=e.toLowerCase();if(this.glossary)for(var b=0;b<this.glossary.length;b++)if(f.indexOf(this.glossary[b].toLowerCase())==-1){var a=false;for(var c in intl_explode_inflection(this.glossary[b].toLowerCase()))if(f.indexOf(c)!=-1)a=true;if(!a)return _tx("Recommended glossary translations not used.");}};intl_translation_dialog.prototype.rule_punctuation=function(b,d){var c=[',','.','?','!',';',':'];for(var a=0;a<c.length;a++)if(substr_count(b,c[a])!=substr_count(d,c[a]))return _tx("Punctuation mismatch. Did you forget a period or other punctuation?");};intl_translation_dialog.prototype.rule_punctuation_asian=function(c,e){var d={'?':"\uFF1F",'.':"\u3002",'!':"\uFF01",':':"\uFF1A"};var a=c.substr(c.length-1);var b=d[a];if(b&&e.substr(e.length-1)!=a&&e.substr(e.length-1)!=b)return _tx("Punctuation mismatch. Did you forget a period or other punctuation?");};intl_translation_dialog.prototype.rule_punctuation_tr=function(c,d){var a=['?','!',';',':'];for(var b=0;b<a.length;b++)if(substr_count(c,a[b])!=substr_count(d,a[b]))return _tx("Punctuation mismatch. Did you forget a period or other punctuation?");if(substr_count(c,'.')+substr_count(c,',')!=substr_count(d,'.')+substr_count(d,','))return _tx("Punctuation mismatch. Did you forget a period or comma?");};intl_translation_dialog.prototype.rule_punctuation_ar=function(d,e){var b=[',','.','!',';',':'];for(var c=0;c<b.length;c++)if(substr_count(d,b[c])!=substr_count(e,b[c]))return _tx("Punctuation mismatch. Did you forget a period or other punctuation?");var a="\u061F";if(substr_count(d,'?')!=substr_count(e,'?')+substr_count(e,a))return _tx("Punctuation mismatch. Did you forget a question mark?");};intl_translation_dialog.prototype.rule_capitalization=function(a,b){if(((a.substring(0,1).toLowerCase()!=a.substring(0,1))!=(b.substring(0,1).toLowerCase()!=b.substring(0,1)))&&(a.substring(0,1)+b.substring(0,1)).indexOf('{')==-1)return _tx("Punctuation mismatch. Did you forget a period or comma?");};intl_translation_dialog.prototype.rule_token_spacing=function(a,d){var c=/(?: |\b|^)\{[^}]+\}(?: |\b|$)/g,b;d=this.cleanseToken(d);while(b=c.exec(a)){b[0]=this.cleanseToken(b[0]);if(d.indexOf(b[0])==-1)return _tx("Spacing mismatch. Please make sure the spacing around tokens in {}'s matches.");}};intl_translation_dialog.prototype.check_warnings=function(b,c){var e=[];for(var a=0;a<this.rules.length;a++){var d=this['rule_'+this.rules[a]](b,c);if(d)e.push(d);}var d=this.rule_markup(b,c);if(d)e.push(d);return e.length?e:null;};intl_translation_dialog.prototype.translation_submit=function(){var c=this.form;var l=this.textarea.id;var k=this.cleanseToken(this.textarea.value);var d=c.hash.value;var i=c.reportable.value;var j;var g;var m;var f;var a=null;var n=true;var b=null;var h=function(o){var z=o.getPayload();j=z.status;m=z.tr_ids;g=z.new_tr_id;d=z.hash;f=z.locale;k=z.new_tr;cancel_url=z.cancel_url;if(cancel_url){var w=cancel_url.replace("xxRESULTTOKENxx",k);goURI(w);}if(j=='exists'||j=='exists-self'){var p=(j=='exists-self')?_tx("Sorry! You already submitted the same translation."):_tx("Sorry! Someone else has already submitted the same translation.");var t=new Dialog().setTitle(_tx("Duplicate Translation")).setBody(p).setButtons([Dialog.newButton('edit-translation',_tx("Edit Translation"),'',function(){t.hide();})]);t.show();}else if(j=='not-utf8'){new Dialog().setTitle(_tx("Unsupported Encoding")).setBody(_tx("Your web browser appears to be set to send data to Facebook in a format our servers don't understand. Please set your browser to use UTF-8 (Unicode). In most browsers this is in a menu item called \"Encoding\" or \"Character Encoding\" or \"Text Encoding\", most often under the \"View\" menu.")).setButtons([Dialog.OK]).show();}else if(j=='empty'){new Dialog().setTitle(_tx("No Translation Provided")).setBody(_tx("Oops! Looks like you didn't type in a translation.")).setButtons([Dialog.OK]).show();}else if(j!='ok'){setTimeout(function(){document.location.reload();},250);}else{intl_update_translations(d,c.loc.value,c.app.value,c.tr_id.value,k);Dialog.getCurrent()&&Dialog.getCurrent().hide();if(window.intl_inline_translation_dialog){intl_inline_translation_dialog.hide();if(c.cmode_flag)new Dialog().setTitle(_tx("Thank you.")).setBody(_tx("Your feedback will be reviewed shortly.")).setButtons([Dialog.OK]).show();}else{var s=z.deleted_tr_ids;for(var u=0;u<s.length;u++)hide(ge('tr_'+s[u]));if(ge('mine_'+d))hide($('mine_'+d));show($('inline_'+d));if(ge('tlink_'+d))$('tlink_'+d).innerHTML='&nbsp;';$('entered_'+d).innerHTML=k;}var r=l.substr(l.indexOf(':')+1);var q=ge('intl_preview_child:'+r);if(q!=null){var y=q.parentNode.id;if(q.hasChildNodes()){q=q.firstChild;q.className='intl-authored';}q.innerHTML=k;var x=y.substr(y.indexOf(':')+1);var za=ge('intl_translation:'+x);var v=DataStore.get(za,'keyupEventRef');if(v)v.fire(za,'keyup');}}};var e=new String(document.location);if(getCookie('appmode')==1)a='1';if(c.approved_tr_id&&c.approved_tr_id.value!='')b=c.approved_tr_id.value;intlXdAsync('/ajax/intl/do_translation.php',{hash:d,translation:k,aloc:c.loc.value,charset_test:c.charset_test.value,post_form_id:'1',approved_tr_id:b,reportable:i,app_id:c.app.value,shown_tr_id:this.shown_tr_id,cancel_url:c.cancel_url.value,cmode_desc:c.cmode_desc?c.cmode_desc.value:null,cmode_flag:c.cmode_flag?c.cmode_flag.value:null},'POST',h);return j;};intl_translation_dialog.prototype.submit_unfinalize=function(){var a=null;var b=new String(document.location);if(getCookie('appmode')==1)a='1';intlXdAsync('/ajax/intl/do_unapprove.php',{hash:this.form.hash.value,app_id:this.form.app.value,post_form_id:'1',approve_mode:a,aloc:this.form.loc.value},'POST',function(){document.location.reload();});};intl_translation_dialog.prototype.submit_delete=function(){intlXdAsync('/ajax/intl/delete_translations.php',{hashes:[this.form.hash.value],aloc:this.form.loc.value,app_id:this.form.app.value,translation:this.cleanseToken(this.textarea.value),non_admin_mode:1},'POST',function(){document.location.reload();});};intl_translation_dialog.prototype.submit_click=function(){var j,m;var k;var i=this.form;var d=false;var l=true;if(i.approved_tr_id)d=true;var g=i.cancel_url;var a=64;var c=4096;var b=8192;if((i.cmode_flag&&(i.cmode_flag.value&(a+c+b)))||g!=null)l=false;if(i.cmode_flag&&i.cmode_flag.value==0){if(i.reportable&&i.reportable.value==1){new Dialog().setTitle(_tx("No reason given")).setBody(_tx("Oops! You need to provide a reason for reporting a phrase.")).setButtons([Dialog.OK]).show();}else new Dialog().setTitle(_tx("No reason given")).setBody(_tx("Oops! You need to provide a reason for reporting a translation.")).setButtons([Dialog.OK]).show();}else if(l&&!this.check_tokens()){if(i.reportable&&i.reportable.value==0)new Dialog().setTitle(_tx("Unused Tokens")).setBody(_tx("You did not use all the tokens while translating this string. Please make sure you maintain all text in curly braces (e.g. {{example}}) in the translation.")).setButtons([Dialog.OK]).show();}else if(l&&!this.check_additional_tokens(this.native_string,this.textarea.value)){if(i.reportable&&i.reportable.value==0)new Dialog().setTitle(_tx("Extra Tokens")).setBody(_tx("The translation you provided has additional tokens not present in the original text. Please make sure you do not type in anything in curly braces that is not part of the original text.")).setButtons([Dialog.OK]).show();}else if(i.reportable&&i.reportable.value==0&&l&&(m=this.check_warnings(this.native_string,this.textarea.value))&&(d==false)){var e=(m.length==1)?_tx("There may be a problem with your translation! The translation you provided failed the following style check:"):_tx("There may be a problem with your translation! The translation you provided failed the following style checks:");var f=(m.length==1)?_tx("It's ok to ignore this warning if it makes sense given the context of the phrase, but please make sure that this is the case."):_tx("It's ok to ignore these warnings if they make sense given the context of the phrase, but please make sure that this is the case.");var h=new Dialog().setTitle(_tx("Translation Warning")).setBody(e+'<br/><ul><li>'+m.join('</li><li>')+'</li></ul><br />'+f).setButtons([Dialog.newButton('submit-translation',_tx("Submit Translation"),'',function(){h.hide();this.translation_submit();}.bind(this)),Dialog.newButton('review-translation',_tx("Review Translation"))]).show();}else this.translation_submit();};intl_translation_dialog.prototype.handle_approver_checkbox=function(a){var b=DOM.getText(ge('tr_id_'+a.value));if(a.checked==false){this.textarea.value='';}else this.textarea.value=b;if(this.form.approved_tr_id)this.form.approved_tr_id.value=a.value;this.refreshTokens();this.refreshPreview();};function substr_count(b,c){var a=0,d=b.indexOf(c);while(d!=-1){a++;d=b.indexOf(c,d+1);}return a;}function intl_amode_reset_tr_checkbox(d){var a=document.getElementsByName('approved_trs');if(a.length)for(var c=0;c<a.length;c++)a[c].checked=false;var b='intl_ajax:'+d;if(ge(b).approved_tr_id)ge(b).approved_tr_id.value='';}function intl_show_extras(a){var b=ge('intl_extra_phrases');if(b)if(a==false){b.style.display='block';animation(document.body).to('scrollTop',elementY(b)).ease(animation.ease.end).go();}else b.style.display='none';}function intl_use_translation(c,d){if(c){var b='intl_translation';if(d!=0)b+=':'+d;var a=ge(b);if(a){a.value=c;window.translation_dialog.refreshTokens();window.translation_dialog.refreshPreview();window.translation_dialog.refreshSegment();}}return false;}function intl_toggle_vote_dialog(c,e){var b=ge(c);var d=ge(e);if(!b||!d)return;var a='link_vote_more_active';if(CSS.hasClass(b,a)){hide(d);CSS.removeClass(b,a);}else{d.style.display='block';CSS.addClass(b,a);}}function intl_toggle_variation_table(){if(ge('intl_no_variation').style.display=='none'){show(ge('intl_no_variation'));hide(ge('intl_with_variation'));}else{hide(ge('intl_no_variation'));show(ge('intl_with_variation'));}}function intl_admin_browse_onclick(a){if(a.value=='secret'){show(ge('secret_select'));}else hide(ge('secret_select'));}function intl_admin_browse_secret_onclick(a){goURI('/translations/admin/browse.php?vtype=secret&stype='+a.value);}function show_all_approve_table(){var a=$('approve_table').getElementsByTagName("tr");if(a.length>1)for(var b=0;b<a.length;b++)if(!shown(a[b]))show(a[b]);}function approve_swap(c){var a=$('approve_table').getElementsByTagName("tr");if(a.length>1)for(var b=0;b<a.length;b++)if(CSS.hasClass(a[b],'approved_row'))CSS.removeClass(a[b],'approved_row');CSS.addClass($('row_id_'+c),'approved_row');}function check_impossible(a){if(a.value=='64'||a.value=='4096'||a.value=='8192'){show($('impossible_form'));hide($('intl_render_dialog_text_area'));hide($('complain_desc'));if(ge('native_string_tokens'))hide($('native_string_tokens'));if(ge('native_string_token_deps'))hide($('native_string_token_deps'));if(ge('intl_with_variation'))hide($('intl_with_variation'));if(ge('glossary'))hide($('glossary'));}else{hide($('impossible_form'));show($('intl_render_dialog_text_area'));show($('complain_desc'));if(ge('native_string_tokens'))show($('native_string_tokens'));if(ge('native_string_token_deps'))show($('native_string_token_deps'));if(ge('intl_no_variation'))show($('intl_no_variation'));if(ge('glossary'))show($('glossary'));if(ge('intl_with_variation'))hide($('intl_with_variation'));}}function intl_submit_variations(c){var b=$('record_variations_form:'+c);var g={hash:c,aloc:b.locale.value,app_id:b.app_id.value,inline:false};var a=b.getElementsByTagName('INPUT');for(var d=0;d<a.length;d++)if(a[d].type=='checkbox'&&a[d].checked){var e=a[d].id.substring(0,a[d].id.length-2).replace(/\-/g,'_');if(!g[e])g[e]=0;g[e]+=Number(a[d].value);}var f=function(h){var i=h.getPayload();goURI(i.redirect_url);};intlXdAsync('/ajax/intl/record_variations.php',g,'POST',bind(this,f));}function intl_need_review_onchange(){var a=ge('review_form');a.submit();}function intl_decode_attr_value(a){return decodeURIComponent(a.replace(/_/g,'%'));}function intl_update_translations(c,g,a,l,h){if(h){attribute_tokens_regex=/({[^}]*) #[^}]*}/g;h=h.replace(attribute_tokens_regex,'$1}');}for(var e=1;e<1000;e++){var f=c+'__'+g+'__'+e+'__'+a+'__'+l;var b=ge('trans__'+f);if(!b)if(e<5){continue;}else break;if(h){var k=JSON.parse(intl_decode_attr_value(b.getAttribute('tokens')));if(window.intl_replaced_trans){for(var m in window.intl_replaced_trans){var d=new RegExp('(<em[^>]+id=trans__'+m+' [^>]*>).*(</em>)');var i=window.intl_replaced_trans[m];for(var j in k){var n=k[j];if(typeof(n)=='string')k[j]=n.replace(d,'$1'+i+'$2');}}}else window.intl_replaced_trans={};b.innerHTML=_tx(h,k);window.intl_replaced_trans[c+'__'+g+'__\\d+__'+a+'__'+l]=h;}if(CSS.hasClass(b,'intl-translatable')){CSS.removeClass(b,'intl-translatable');CSS.addClass(b,'intl-authored');}else if(CSS.hasClass(b,'intl-approvable')){CSS.removeClass(b,'intl-approvable');CSS.addClass(b,'intl-iapproved');}else if(CSS.hasClass(b,'intl-votable')||CSS.hasClass(b,'intl-unvotable')){CSS.removeClass(b,'intl-votable');CSS.removeClass(b,'intl-unvotable');CSS.addClass(b,'intl-voted');}else if(CSS.hasClass(b,'intl-complainable')){CSS.removeClass(b,'intl-complainable');CSS.addClass(b,"intl-complained");}}}function intl_update_vote_controls(d,f,k){var g=['vmode_dialog','vmode_bulk','app_bulk'];for(var e=0;e<g.length;e++){var i='voteup:'+d+':'+f+':'+g[e];var h=ge(i);var b='votedown:'+d+':'+f+':'+g[e];var a=ge(b);if(!h||!a)continue;var j=h.className;var c=a.className;if((j=='upselect'&&k==-1)||(c=='downselect'&&k==1)){CSS.setClass(h,'upover');CSS.setClass(a,'downover');}else if(k==1){CSS.setClass(h,'upselect');CSS.setClass(a,'downover');}else{CSS.setClass(h,'upover');CSS.setClass(a,'downselect');}}}function intl_show_leaderboard_option(a,b){var c=function(d){var e=d.getPayload();new Dialog().setTitle(_tx("Options for Translations Leaderboard")).setBody(e.html).setButtons(Dialog.OK_AND_CANCEL).setHandler(function(){intl_save_leaderboard_option(a,b);}).show();};new AsyncRequest().setURI('/ajax/intl/show_leaderboard_option.php').setData({app_id:a,aloc:b}).setHandler(bind(this,c)).send();}function intl_save_leaderboard_option(a,c){var b=$('leaderboard_invisibility').checked;new AsyncRequest().setURI('/ajax/intl/save_leaderboard_option.php').setData({invisibility:b,app_id:a,aloc:c}).send();window.location.reload();}function intl_set_user_blacklist(a,d,f,e,b){if(b){new Dialog().setTitle(_tx("Ban user from Translation Application")).setBody(_tx("Are you sure you want to ban this user from using the Translation Application? Doing so will disallow the user from submitting new translations and votes for your application.")).setButtons([{name:'yes',label:_tx("Yes"),handler:bind(this,c,a,d,f,true)},{name:'no',label:_tx("No")}]).show();}else new Dialog().setTitle(_tx("Remove user from Translation Application blacklist")).setBody(_tx("Are you sure you want to remove this user from Translation Application blacklist? Doing so will re-enable the user to submit translations and votes for your application.")).setButtons([{name:'yes',label:_tx("Yes"),handler:bind(this,c,a,d,f,false)},{name:'no',label:_tx("No")}]).show();function c(g,h,j,k){var i=function(l){var m=l.getPayload();if(m.status=='ok')if(m.blacklist){show($('unblacklist:'+e));hide($('blacklist:'+e));}else{show($('blacklist:'+e));hide($('unblacklist:'+e));}};intlXdAsync('/ajax/intl/set_user_blacklist.php',{app_id:g,aloc:h,user_id:j,blacklist:k},'POST',i);}}function intl_native_diff(f,b,c,a,d){var e=function(g){var h=g.getPayload();new ContextualDialog().setContext(ge(f)).setTitle(_tx("Differences in source string")).setBody(h.body).setButtons(Dialog.OK).show();};intlXdAsync('/ajax/intl/native_diff.php',{app_id:a,aloc:d,hash_a:b,hash_b:c},'POST',e);}intl_translation_dialog.prototype.approve_submit_long_click=function(){var b=this.form;var c=b.hash.value;var d=b.loc.value;var a=b.app.value;var f=b.tr_id.value;var e=this.cleanseToken(this.textarea.value);if(trim(e)=='')return;do_multi_locale_approve(d,a,[c],[e],this.post_multi_locale_approve.bind(this,c,d,a,f,e),null);};intl_translation_dialog.prototype.post_multi_locale_approve=function(b,c,a,e,d){intl_update_translations(b,c,a,e,d);};
function scribe_log(a,b){new AsyncSignal('/ajax/scribe_log.php',{category:a,message:b}).send();}function textLimit(b,a){var c=ge(b);if(c.value.length>a){c.value=c.value.substring(0,a);if(arguments.length>2)$(arguments[2]).style.display='block';}}function textLimitStrict(h,d,e,a,f){var g=ge(h);if(g){var c=g.value.length;var b=c-d;if(b>0){if(b>25000){g.value=g.value.substring(0,d+25000);b=25000;}$(e).style.display='block';$(a).innerHTML=b;$(f).disabled=true;}else if(c==0){$(e).style.display='none';$(f).disabled=true;$(a).innerHTML=1;}else if($(a).innerHTML!=0){$(a).innerHTML=0;$(e).style.display='none';$(f).disabled=false;}}}
if(!this.JSON)this.JSON=function(){function f(n){return n<10?'0'+n:n;}Date.prototype.toJSON=function(){return this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z';};var m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};function stringify(value,whitelist){var a,i,k,l,v;switch(typeof value){case 'string':return (new RegExp('[\x00-\x1f\\\\"]')).test(value)?'"'+value.replace(/[\x00-\x1f\\"]/g,function(a){var c=m[a];if(c)return c;c=a.charCodeAt();return '\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"':'"'+value+'"';case 'number':return isFinite(value)?String(value):'null';case 'boolean':return String(value);case 'null':return 'null';case 'object':if(DOM.isNode(value))return null;if(!value)return 'null';if(typeof value.toJSON==='function')return stringify(value.toJSON());a=[];if(typeof value.length==='number'&&!(propertyIsEnumerable(value,'length'))){l=value.length;for(i=0;i<l;i+=1)a.push(stringify(value[i],whitelist)||'null');return '['+a.join(',')+']';}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==='string'){v=stringify(value[k],whitelist);if(v)a.push(stringify(k)+':'+v);}}}else for(k in value)if(typeof k==='string'){v=stringify(value[k],whitelist);if(v)a.push(stringify(k)+':'+v);}return '{'+a.join(',')+'}';}}return {stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==='object')for(i in v)if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined)v[i]=n;}return filter(k,v);}if(text&&/^[\],:{}\s]*$/.test(text.replace(/\\./g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof filter==='function'?walk('',j):j;}throw new SyntaxError('decodeJSON');}};}();function propertyIsEnumerable(a,b){if(a.propertyIsEnumerable)return a.propertyIsEnumerable(b);for(var c in a)if(c==b)return true;return false;}
InitialJSLoader={INITIAL_JS_READY:'BOOTLOAD/JSREADY',load:function(a){InitialJSLoader.callback=Bootloader.loadResources(a,InitialJSLoader.callback);},callback:Arbiter.registerCallback(function(){Arbiter.inform(InitialJSLoader.INITIAL_JS_READY,true,Arbiter.BEHAVIOR_STATE);},[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK])};
window.onloadRegister=function(a){window.loaded?_runHook(a):_addHook('onloadhooks',a);};function onafterloadRegister(a){window.afterloaded?setTimeout(function(){_runHook(a);},0):_addHook('onafterloadhooks',a);}function _onloadHook(){!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_prehooks');_runHooks('onloadhooks');!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_hooks');window.loaded=true;Arbiter.inform('uipage_onload',true,Arbiter.BEHAVIOR_STATE);}function _onafterloadHook(){_runHooks('onafterloadhooks');window.afterloaded=true;}function _runHook(b){try{return b();}catch(a){}}function _runHooks(b){var d=b=='onbeforeleavehooks'||b=='onbeforeunloadhooks';var e=null;do{var a=window[b];if(!d)window[b]=null;if(!a)break;for(var c=0;c<a.length;c++)if(d){e=e||_runHook(a[c]);}else _runHook(a[c]);if(d)break;}while(window[b]);if(d&&e)return e;}function keep_window_set_as_loaded(){if(window.loaded==false){window.loaded=true;_runHooks('onloadhooks');}if(window.afterloaded==false){window.afterloaded=true;_runHooks('onafterloadhooks');}}Arbiter.registerCallback(_onloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.registerCallback(_onafterloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,OnloadEvent.ONLOAD_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.subscribe(OnloadEvent.ONBEFOREUNLOAD,function(b,a){a.warn=_runHooks('onbeforeleavehooks')||_runHooks('onbeforeunloadhooks');if(!a.warn){window.loaded=false;window.afterloaded=false;}},Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe(OnloadEvent.ONUNLOAD,function(b,a){_runHooks('onunloadhooks');},Arbiter.SUBSCRIBE_NEW);
var PlatformOptInPopup=function(){};copy_properties(PlatformOptInPopup,{DIALOG_URL:'/connect/uiserver.php',DIALOG_WIDTH:420,DIALOG_HEIGHT:450,APP_ID:127760087237610,open:function(d,c,a){if(!d)d='generic';if(!c)c='opt.in';var b=new URI(PlatformOptInPopup.DIALOG_URL);b.addQueryData({social_plugin:d,method:c,display:'popup',secure:URI.getRequestURI().isSecure(),app_id:PlatformOptInPopup.APP_ID});if(a)b.addQueryData(a);return PopupResizer.open(b.toString(),PlatformOptInPopup.DIALOG_WIDTH,PlatformOptInPopup.DIALOG_HEIGHT);}});
var SendButton={config:{button:null,channel:'',id:'send-plugin',loggedIn:false,nodeImageURL:'',nodeTitle:'',nodeURL:'',nodeSummary:'',error:null},init:function(a){copy_properties(this.config,a);a=this.config;a.button=$(a.id);a.loggedIn=!!a.userID;this.formIsOpen=false;this.formIsShown=false;this.pendingFormShow=false;Arbiter.subscribe('platform/socialplugins/send/sent',function(c,b){if(b.controllerID===a.id)this.closeForm();}.bind(this),Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe('platform/socialplugins/send/cancel',function(c,b){if(b.controllerID===a.id)this.hideForm();}.bind(this),Arbiter.SUBSCRIBE_NEW);this.buttonWidth=Vector2.getElementDimensions(a.button).x;Arbiter.inform('platform/socialplugins/send/resize',{button_width:this.buttonWidth},Arbiter.BEHAVIOR_STATE);Arbiter.subscribe('platform/socialplugins/dialog',function(c,b){if(b.controllerID!==a.id&&b.event=='open')this.closeForm();}.bind(this));UnverifiedXD.init({channelUrl:a.channel,autoResize:true,resizeWidth:true});Event.listen(a.button,'click',this.toggleForm.bind(this));if(a.initFormOpen)this.toggleForm();},toggleForm:function(b){var a=this.config;if(!a.loggedIn){b.kill();PlatformOptInPopup.open('send');return;}if(!this.formIsOpen){this.openForm();}else if(this.formIsShown){this.hideForm();}else this.showForm();},hideForm:function(){if(this.formIsShown){this.formIsShown=false;UnverifiedXD.send({type:'hideEdgeCommentDialog'});CSS.removeClass(this.config.button,'pluginButtonPressed');}},showForm:function(){if(!this.formIsShown){CSS.addClass(this.config.button,'pluginButtonPressed');this.formIsShown=true;UnverifiedXD.send({type:'showEdgeCommentDialog'});}},closeForm:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.config.id,event:'close'});if(this.formIsOpen){this.formIsOpen=this.formIsShown=false;UnverifiedXD.send({type:'dismissEdgeCommentDialog'});CSS.removeClass(this.config.button,'pluginButtonPressed');}return this;},openForm:function(){var a=this.config;Arbiter.inform('platform/socialplugins/dialog',{controllerID:a.id,event:'open'});if(!this.formIsOpen){CSS.addClass(a.button,'pluginButtonPressed');this.formIsOpen=this.formIsShown=true;var b={type:'presentEdgeCommentDialog',nodeImageURL:a.nodeImageURL,nodeTitle:a.nodeTitle,nodeURL:a.nodeURL,nodeSummary:a.nodeSummary,controllerID:a.id,error:a.error,widget_type:'send'};UnverifiedXD.send(b);}return this;}};